import{u as P,o as x,c as $,w as d,f,a as n,b as a,g as o,n as B}from"./app.7bd59177.js";import{_ as C}from"./ActionMessage.ea502d4a.js";import{_ as A}from"./FormSection.78692eea.js";import{_}from"./InputError.53ded8ea.js";import{_ as m}from"./InputLabel.8aba4d8a.js";import{_ as E}from"./PrimaryButton.1b1d1611.js";import{_ as g}from"./TextInput.d5f3711d.js";import{_ as z}from"./InputRadio.2e046fc7.js";import{E as U}from"./Alerts.67dd8847.js";import{a as j}from"./Utils.91184964.js";import"./SectionTitle.d3a32837.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./sweetalert2.all.84a2b96b.js";const S=r=>{if(!r||r.length==0)return console.log("no prices"),!1;const t={cancun:[],rm:[],pdc:[]};return r.forEach(c=>{c.zone_id==1?t.cancun=[...t.cancun,c]:c.zone_id==2?t.rm=[...t.rm,c]:c.zone_id==3&&(t.pdc=[...t.pdc,c])}),t},N={class:"col-span-6 sm:col-span-4"},T={class:"flex gap-4"},Z={class:"flex items-center pl-4"},q={class:"flex items-center pl-4"},F={class:"flex items-center pl-4"},M={class:"col-span-6 sm:col-span-4"},O={class:"col-span-6 sm:col-span-4"},R={class:"col-span-6 sm:col-span-4"},G={class:"col-span-6 sm:col-span-4"},ie={__name:"AddPricesForm",props:{activity:Object},setup(r){const t=r,c={adult_low_price:"0.00",kid_low_price:"0.00",adult_high_price:"0.00",kid_high_price:"0.00"},V=s=>{let l={};return s.forEach(i=>{l[i.type]||(l[i.type]={}),l[i.type][i.season]||(l[i.type][i.season]={}),l[i.type][i.season]=i.amount}),{adult_low_price:l.adult.low,kid_low_price:l.kid.low,adult_high_price:l.adult.high,kid_high_price:l.kid.high}},h=s=>{var i;let l=S(t.activity.prices);return l&&((i=l[s])==null?void 0:i.length)>0?V(l[s]):c},e=P({price_zone:"cancun",cancun:{...h("cancun")},rm:{...h("rm")},pdc:{...h("pdc")},model:[]}),b=()=>{e.post(route("activity.price.upsert"),{preserveScroll:!0,onSuccess:s=>{console.log(s)},onError:s=>{console.log(s),U("Error inesperado","Verifique los datos ingresados")}})},u=(s,l=null,i,v,y)=>{const k=j(i),w=e.model.find(p=>p.zone_id===k&&p.season===v&&p.type===y);if(w){w.amount=s;return}else{const p={activity_id:l,zone_id:k,season:v,type:y,amount:s};e.model.push(p);return}};return(s,l)=>(x(),$(A,{onSubmitted:b},{title:d(()=>[f(" Agregar precios ")]),description:d(()=>[f(" Agregue los precios por temporada Alta y Baja para Adultos y Menores para la actividad. ")]),form:d(()=>[n("div",N,[a(m,{for:"price_zone",value:"Zona"}),n("div",T,[n("div",Z,[a(z,{label:"Cancun",name:"price_zone",modelValue:o(e).price_zone,"onUpdate:modelValue":l[0]||(l[0]=i=>o(e).price_zone=i),value:"cancun",id:"cancun"},null,8,["modelValue"])]),n("div",q,[a(z,{label:"Riviera Maya",name:"price_zone",modelValue:o(e).price_zone,"onUpdate:modelValue":l[1]||(l[1]=i=>o(e).price_zone=i),value:"rm",id:"rm"},null,8,["modelValue"])]),n("div",F,[a(z,{label:"Playa del Carmen",name:"price_zone",modelValue:o(e).price_zone,"onUpdate:modelValue":l[2]||(l[2]=i=>o(e).price_zone=i),value:"pdc",id:"pdc"},null,8,["modelValue"])])]),a(_,{message:o(e).errors.activity_type,class:"mt-2"},null,8,["message"])]),n("div",M,[a(m,{for:"adult_low_price",value:"Precio adulto ( temporada baja )"}),a(g,{id:"adult_low_price",onChange:l[3]||(l[3]=i=>u(o(e)[o(e).price_zone].adult_low_price,r.activity.id,o(e).price_zone,"low","adult")),modelValue:o(e)[o(e).price_zone].adult_low_price,"onUpdate:modelValue":l[4]||(l[4]=i=>o(e)[o(e).price_zone].adult_low_price=i),pattern:"[0-9]+([,\\.][0-9]+)?",type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),a(_,{message:o(e).errors.adult_low_price,class:"mt-2"},null,8,["message"])]),n("div",O,[a(m,{for:"kid_low_price",value:"Precio menor ( temporada baja )"}),a(g,{onChange:l[5]||(l[5]=i=>u(o(e)[o(e).price_zone].kid_low_price,r.activity.id,o(e).price_zone,"low","kid")),id:"kid_low_price",modelValue:o(e)[o(e).price_zone].kid_low_price,"onUpdate:modelValue":l[6]||(l[6]=i=>o(e)[o(e).price_zone].kid_low_price=i),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),a(_,{message:o(e).errors.kid_low_price,class:"mt-2"},null,8,["message"])]),n("div",R,[a(m,{for:"adult_high_price",value:"Precio adulto ( temporada alta )"}),a(g,{onChange:l[7]||(l[7]=i=>u(o(e)[o(e).price_zone].adult_high_price,r.activity.id,o(e).price_zone,"high","adult")),id:"adult_high_price",modelValue:o(e)[o(e).price_zone].adult_high_price,"onUpdate:modelValue":l[8]||(l[8]=i=>o(e)[o(e).price_zone].adult_high_price=i),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),a(_,{message:o(e).errors.adult_high_price,class:"mt-2"},null,8,["message"])]),n("div",G,[a(m,{for:"kid_high_price",value:"Precio menor ( temporada alta )"}),a(g,{onChange:l[9]||(l[9]=i=>u(o(e)[o(e).price_zone].kid_high_price,r.activity.id,o(e).price_zone,"high","kid")),id:"kid_high_price",modelValue:o(e)[o(e).price_zone].kid_high_price,"onUpdate:modelValue":l[10]||(l[10]=i=>o(e)[o(e).price_zone].kid_high_price=i),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),a(_,{message:o(e).errors.kid_high_price,class:"mt-2"},null,8,["message"])])]),actions:d(()=>[a(C,{on:o(e).recentlySuccessful,class:"mr-3"},{default:d(()=>[f(" Precios guardados. ")]),_:1},8,["on"]),a(E,{class:B({"opacity-25":o(e).processing}),disabled:o(e).processing},{default:d(()=>[f(" Guardar ")]),_:1},8,["class","disabled"])]),_:1}))}};export{ie as default};
