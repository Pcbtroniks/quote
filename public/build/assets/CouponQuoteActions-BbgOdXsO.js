import{S as u}from"./sweetalert2.all-SDzUv-ZR.js";import{_ as w}from"./BodySection-TBqlHEAh.js";import{_}from"./Button-Cg8S-Xss.js";import{j as S,c as d,o as i,w as p,a as e,e as x,f as r,g as m,n as C,t as c,u as y,J as h}from"./app-BDCeMI-n.js";import"./index-B2o-3mPr.js";import{u as N,P as $}from"./Permissions-1I2MD7Va.js";import"./SectionTitle-B0L66kJy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"col-span-6"},E={class:"text-lg font-medium text-gray-900"},L={key:0},O={class:"text-sm text-gray-500"},P=e("br",null,null,-1),T={class:"text-sm text-gray-500"},z=e("br",null,null,-1),G={class:"text-sm text-gray-500"},M={class:"col-span-6 sm:col-span-4"},R={class:"relative flex items-center gap-1"},V={key:0,class:"mt-2"},U={__name:"CouponQuoteActions",props:{quote:Object},setup(n){const t=n,l=S({coupon:null,error:null,couponCode:null,processing:!1,syncing:!1}),b=async s=>{const o=await h.post(route("coupon.get.coupon",{quote:s}));console.log(o),u.fire({title:"Código de cupón",text:o.data.code,icon:"success",confirmButtonText:"Ok"}).then(a=>{a.isConfirmed&&location.reload()})},q=async s=>{const o=await h.post(route("coupon.confirm",{coupon:s}));console.log(o),u.fire({title:"Cupon confirmado!",text:"El cupón ha sido confirmado y estara disponible para su uso",icon:"success",confirmButtonText:"Ok"}).then(a=>{a.isConfirmed&&location.reload()})},k=async s=>{u.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, ¡aplicar cupón!"}).then(o=>{o.isConfirmed&&q(s)})},v=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-500";case"confirmed":return"bg-green-100 text-green-500";case"canceled":return"bg-red-100 text-red-500";default:return"bg-gray-100 text-gray-500"}};return(s,o)=>(i(),d(w,null,{title:p(()=>[m(" Acciones ")]),description:p(()=>[m(" Genere un folio / Muestre oculte el folio ")]),content:p(()=>{var a,g,f;return[e("div",A,[e("div",E,[m("Cotización "),e("span",{class:C([v(t.quote.status),"p-2 rounded"])},"status "+c(t.quote.status),3)]),y(N)(s.$page.props.user,y($).MANAGE_BRANCH)?(i(),x("div",L,[e("span",O,"Realizada por: "+c(t.quote.user.name)+" en ("+c(t.quote.team.name)+") el dia "+c(t.quote.created_at),1),P,e("span",T,"Precio publico: $"+c(t.quote.public_price),1),z,e("span",G,"Costo: $"+c(t.quote.cost_amount),1)])):r("",!0)]),e("div",M,[e("div",R,[(a=n.quote.coupon)!=null&&a.code?r("",!0):(i(),d(_,{key:0,onClick:o[0]||(o[0]=B=>b(t.quote.id)),class:C({"opacity-25":l.processing}),isLoading:l.processing,msg:"Generar Folio"},null,8,["class","isLoading"])),(g=n.quote.coupon)!=null&&g.code&&n.quote.coupon.status!="confirmed"?(i(),d(_,{key:1,onClick:o[1]||(o[1]=B=>k(t.quote.coupon.id)),class:"bg-green-500 hover:bg-green-600",isLoading:l.processing,disabled:n.quote.coupon.confirmation_key==null,msg:"Aceptar cupon"},null,8,["isLoading","disabled"])):r("",!0)]),((f=n.quote.coupon)==null?void 0:f.confirmation_key)==null?(i(),x("small",V," Nota: debe agregar la clave de confirmación para poder aceptar el cupon. ")):r("",!0)])]}),_:1}))}};export{U as default};
