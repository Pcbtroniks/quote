import{S as u}from"./sweetalert2.all-CwKIjRrp.js";import{_ as w}from"./BodySection-DbMXbYAC.js";import{_ as f}from"./Button-Cq-z-lsq.js";import{j as B,c as d,o as i,w as p,a as o,e as _,f as r,g as S,n as x,t as c,u as C,L as y}from"./app-B5gBv8jV.js";import"./index-Dcogr0hA.js";import{u as N,P as $}from"./Permissions-1I2MD7Va.js";import"./SectionTitle-DrZ9THbr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A=o("h3",{class:"text-gray-300"}," Acciones ",-1),E=o("span",{class:"text-white"}," Genere un folio / Muestre oculte el folio ",-1),L={class:"col-span-6"},O={class:"text-lg font-medium text-gray-900"},P={key:0},T={class:"text-sm text-gray-500"},z=o("br",null,null,-1),G={class:"text-sm text-gray-500"},M=o("br",null,null,-1),R={class:"text-sm text-gray-500"},V={class:"col-span-6 sm:col-span-4"},j={class:"relative flex items-center gap-1"},H={key:0,class:"mt-2"},X={__name:"CouponQuoteActions",props:{quote:Object},setup(n){const t=n,l=B({coupon:null,error:null,couponCode:null,processing:!1,syncing:!1}),h=async s=>{const e=await y.post(route("coupon.get.coupon",{quote:s}));console.log(e),u.fire({title:"Código de cupón",text:e.data.code,icon:"success",confirmButtonText:"Ok"}).then(a=>{a.isConfirmed&&location.reload()})},b=async s=>{const e=await y.post(route("coupon.confirm",{coupon:s}));console.log(e),u.fire({title:"Cupon confirmado!",text:"El cupón ha sido confirmado y estara disponible para su uso",icon:"success",confirmButtonText:"Ok"}).then(a=>{a.isConfirmed&&location.reload()})},q=async s=>{u.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, ¡aplicar cupón!"}).then(e=>{e.isConfirmed&&b(s)})},k=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-500";case"confirmed":return"bg-green-100 text-green-500";case"canceled":return"bg-red-100 text-red-500";default:return"bg-gray-100 text-gray-500"}};return(s,e)=>(i(),d(w,null,{title:p(()=>[A]),description:p(()=>[E]),content:p(()=>{var a,m,g;return[o("div",L,[o("div",O,[S("Cotización "),o("span",{class:x([k(t.quote.status),"p-2 rounded"])},"status "+c(t.quote.status),3)]),C(N)(s.$page.props.user,C($).MANAGE_BRANCH)?(i(),_("div",P,[o("span",T,"Realizada por: "+c(t.quote.user.name)+" en ("+c(t.quote.team.name)+") el dia "+c(t.quote.created_at),1),z,o("span",G,"Precio publico: $"+c(t.quote.public_price),1),M,o("span",R,"Costo: $"+c(t.quote.cost_amount),1)])):r("",!0)]),o("div",V,[o("div",j,[(a=n.quote.coupon)!=null&&a.code?r("",!0):(i(),d(f,{key:0,onClick:e[0]||(e[0]=v=>h(t.quote.id)),class:x({"opacity-25":l.processing}),isLoading:l.processing,msg:"Generar Folio"},null,8,["class","isLoading"])),(m=n.quote.coupon)!=null&&m.code&&n.quote.coupon.status!="confirmed"?(i(),d(f,{key:1,onClick:e[1]||(e[1]=v=>q(t.quote.coupon.id)),class:"bg-green-500 hover:bg-green-600",isLoading:l.processing,disabled:n.quote.coupon.confirmation_key==null,msg:"Aceptar cupon"},null,8,["isLoading","disabled"])):r("",!0)]),((g=n.quote.coupon)==null?void 0:g.confirmation_key)==null?(i(),_("small",H," Nota: debe agregar la clave de confirmación para poder aceptar el cupon. ")):r("",!0)])]}),_:1}))}};export{X as default};
