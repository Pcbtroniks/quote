import{_ as v}from"./BodySection.ad97bc98.js";import{_ as f}from"./Button.da3de119.js";import{D as w,o as i,c as u,w as d,f as p,a as o,n as _,t as c,d as x,e as r,J as C}from"./app.c62c9a16.js";import"./SectionTitle.24e8a633.js";import"./_plugin-vue_export-helper.cdc0426e.js";const B={class:"col-span-6"},S={class:"text-lg font-medium text-gray-900"},$={key:0},N={class:"text-sm text-gray-500"},L=o("br",null,null,-1),T={class:"text-sm text-gray-500"},z=o("br",null,null,-1),A={class:"text-sm text-gray-500"},E={class:"col-span-6 sm:col-span-4"},O={class:"relative flex items-center gap-1"},V={key:0,class:"mt-2"},M={__name:"CouponQuoteActions",props:{quote:Object},setup(s){const t=s,l=w({coupon:null,error:null,couponCode:null,processing:!1,syncing:!1}),y=async n=>{const e=await C.post(route("coupon.get.coupon",{quote:n}));console.log(e),Swal.fire({title:"C\xF3digo de cup\xF3n",text:e.data.code,icon:"success",confirmButtonText:"Ok"}).then(a=>{a.isConfirmed&&location.reload()})},h=async n=>{const e=await C.post(route("coupon.confirm",{coupon:n}));console.log(e),Swal.fire({title:"Cupon confirmado!",text:"El cup\xF3n ha sido confirmado y estara disponible para su uso",icon:"success",confirmButtonText:"Ok"}).then(a=>{a.isConfirmed&&location.reload()})},b=async n=>{Swal.fire({title:"\xBFEst\xE1s seguro?",text:"\xA1No podr\xE1s revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, \xA1aplicar cup\xF3n!"}).then(e=>{e.isConfirmed&&h(n)})},q=n=>{switch(n){case"pending":return"bg-yellow-100 text-yellow-500";case"confirmed":return"bg-green-100 text-green-500";case"canceled":return"bg-red-100 text-red-500";default:return"bg-gray-100 text-gray-500"}};return(n,e)=>(i(),u(v,null,{title:d(()=>[p(" Acciones ")]),description:d(()=>[p(" Genere un folio / Muestre oculte el folio ")]),content:d(()=>{var a,m,g;return[o("div",B,[o("div",S,[p("Cotizaci\xF3n "),o("span",{class:_([q(t.quote.status),"p-2 rounded"])},"status "+c(t.quote.status),3)]),n.$page.props.user.is_freetraveler_admin?(i(),x("div",$,[o("span",N,"Realizada por: "+c(t.quote.user.name)+" en ("+c(t.quote.team.name)+") el dia "+c(t.quote.created_at),1),L,o("span",T,"Precio publico: $"+c(t.quote.public_price),1),z,o("span",A,"Costo: $"+c(t.quote.cost_amount),1)])):r("",!0)]),o("div",E,[o("div",O,[(a=s.quote.coupon)!=null&&a.code?r("",!0):(i(),u(f,{key:0,onClick:e[0]||(e[0]=k=>y(t.quote.id)),class:_({"opacity-25":l.processing}),isLoading:l.processing,msg:"Generar Folio"},null,8,["class","isLoading"])),((m=s.quote.coupon)==null?void 0:m.code)&&s.quote.coupon.status!="confirmed"?(i(),u(f,{key:1,onClick:e[1]||(e[1]=k=>b(t.quote.coupon.id)),class:"bg-green-500 hover:bg-green-600",isLoading:l.processing,disabled:s.quote.coupon.confirmation_key==null,msg:"Aceptar cupon"},null,8,["isLoading","disabled"])):r("",!0)]),((g=s.quote.coupon)==null?void 0:g.confirmation_key)==null?(i(),x("small",V," Nota: debe agregar la clave de confirmaci\xF3n para poder aceptar el cupon. ")):r("",!0)])]}),_:1}))}};export{M as default};
