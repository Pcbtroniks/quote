import{_ as w}from"./BodySection.2cdf9f33.js";import{_ as f}from"./Button.34ab8e11.js";import{D as B,c as u,w as d,o as i,f as p,a as e,n as _,t as c,g as x,d as C,e as r,M as y}from"./app.cc7fb2e5.js";import{u as S,P as N}from"./Permissions.1965abcb.js";import"./SectionTitle.9155a1ed.js";import"./_plugin-vue_export-helper.cdc0426e.js";const $={class:"col-span-6"},A={class:"text-lg font-medium text-gray-900"},E={key:0},L={class:"text-sm text-gray-500"},M=e("br",null,null,-1),O={class:"text-sm text-gray-500"},P=e("br",null,null,-1),T={class:"text-sm text-gray-500"},z={class:"col-span-6 sm:col-span-4"},G={class:"relative flex items-center gap-1"},R={key:0,class:"mt-2"},Q={__name:"CouponQuoteActions",props:{quote:Object},setup(n){const t=n,l=B({coupon:null,error:null,couponCode:null,processing:!1,syncing:!1}),h=async s=>{const o=await y.post(route("coupon.get.coupon",{quote:s}));console.log(o),Swal.fire({title:"C\xF3digo de cup\xF3n",text:o.data.code,icon:"success",confirmButtonText:"Ok"}).then(a=>{a.isConfirmed&&location.reload()})},b=async s=>{const o=await y.post(route("coupon.confirm",{coupon:s}));console.log(o),Swal.fire({title:"Cupon confirmado!",text:"El cup\xF3n ha sido confirmado y estara disponible para su uso",icon:"success",confirmButtonText:"Ok"}).then(a=>{a.isConfirmed&&location.reload()})},q=async s=>{Swal.fire({title:"\xBFEst\xE1s seguro?",text:"\xA1No podr\xE1s revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, \xA1aplicar cup\xF3n!"}).then(o=>{o.isConfirmed&&b(s)})},k=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-500";case"confirmed":return"bg-green-100 text-green-500";case"canceled":return"bg-red-100 text-red-500";default:return"bg-gray-100 text-gray-500"}};return(s,o)=>(i(),u(w,null,{title:d(()=>[p(" Acciones ")]),description:d(()=>[p(" Genere un folio / Muestre oculte el folio ")]),content:d(()=>{var a,m,g;return[e("div",$,[e("div",A,[p("Cotizaci\xF3n "),e("span",{class:_([k(t.quote.status),"p-2 rounded"])},"status "+c(t.quote.status),3)]),x(S)(s.$page.props.user,x(N).MANAGE_BRANCH)?(i(),C("div",E,[e("span",L,"Realizada por: "+c(t.quote.user.name)+" en ("+c(t.quote.team.name)+") el dia "+c(t.quote.created_at),1),M,e("span",O,"Precio publico: $"+c(t.quote.public_price),1),P,e("span",T,"Costo: $"+c(t.quote.cost_amount),1)])):r("",!0)]),e("div",z,[e("div",G,[(a=n.quote.coupon)!=null&&a.code?r("",!0):(i(),u(f,{key:0,onClick:o[0]||(o[0]=v=>h(t.quote.id)),class:_({"opacity-25":l.processing}),isLoading:l.processing,msg:"Generar Folio"},null,8,["class","isLoading"])),((m=n.quote.coupon)==null?void 0:m.code)&&n.quote.coupon.status!="confirmed"?(i(),u(f,{key:1,onClick:o[1]||(o[1]=v=>q(t.quote.coupon.id)),class:"bg-green-500 hover:bg-green-600",isLoading:l.processing,disabled:n.quote.coupon.confirmation_key==null,msg:"Aceptar cupon"},null,8,["isLoading","disabled"])):r("",!0)]),((g=n.quote.coupon)==null?void 0:g.confirmation_key)==null?(i(),C("small",R," Nota: debe agregar la clave de confirmaci\xF3n para poder aceptar el cupon. ")):r("",!0)])]}),_:1}))}};export{Q as default};
