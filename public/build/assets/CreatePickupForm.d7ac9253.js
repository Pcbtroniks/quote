import{r as c,u as B,d as i,a as e,n as S,g as a,b as p,l as V,v,N as k,F as _,h as b,E as C,x as N,f as $,o as n,t as g}from"./app.bddc5148.js";import{_ as y}from"./InputText.bf38615f.js";import{_ as A}from"./Button.237c9573.js";import{c as E,b as w,v as U,f as D,R as M}from"./Utils.91184964.js";import{B as j,S as R}from"./Alerts.b3b0b2d0.js";import{l as Z}from"./Providers.f79f7a41.js";import G from"./CreateHotelForm.5c6a357e.js";import"./sweetalert2.all.a9bc49b9.js";const O={class:"w-full antialiased bg-gray-100 text-gray-600"},W={class:"flex flex-col justify-center h-full"},q={class:"w-full mx-auto bg-white shadow-lg rounded-sm"},I={class:"px-5 pt-4 py-4 pb-8 border-b border-gray-100"},J=e("h1",{class:"font-bold text-sky-500 text-2xl border-b border-gray-100 pb-4"},[e("br",{class:"md:hidden"}),$("Creando un pickup")],-1),K=["onSubmit"],Q={class:"md:mt-8 md:flex md:gap-3 md:items-center"},X={class:"md:w-1/6"},Y=e("label",{for:"zone",class:"mb-3 block text-base font-medium text-gray-700"}," Elegir zona ",-1),ee=e("option",{value:"null",selected:"",disabled:""},"-- Zonas --",-1),te=["value","selected"],oe={key:1},se=e("div",{class:"h-4 md:hidden"},null,-1),le={class:"md:w-2/6"},ae=e("label",{for:"hotelName",class:"mb-3 block text-base font-medium text-gray-700"}," Elegir hotel ",-1),ie={class:"relative"},ne={class:"w-full flex flex-col gap-2 absolute bg-white border shadow-md max-h-80 overflow-auto"},de=["onClick"],re=e("div",{class:"h-4 md:hidden"},null,-1),ue={class:"md:w-2/6"},ce=e("label",{for:"tour",class:"mb-3 block text-base font-medium text-gray-700"}," Tour ",-1),me=e("option",{value:"null",selected:"",disabled:""},"-- Tours --",-1),pe=["value","selected"],ve={key:1},fe=e("div",{class:"h-4 md:hidden"},null,-1),he={class:"md:w-2/6"},_e=e("label",{for:"tourPickupTime",class:"mb-3 block text-base font-medium text-gray-700"}," Hora del pickup ",-1),be={class:"mt-4"},ge={type:"submit"},He={__name:"CreatePickupForm",props:{params:Object,tours:Array},setup(L){const m=L,f=c({}),d=c([]),u=c([]),r=c(!1),o=B({zone:null,hotel:null,activity:null,pickup_time:null}),h=c({name:null}),z=l=>{if(l==null&&l.id==o.hotel){r.value=!1;return}o.hotel=l.id,h.value.name=l.name,r.value=!1},F=(l="")=>{const s=[{id:null,name:"No se encontraron hoteles"}];if(l.length==0){u.value=d.value;return}if(l.length<3)return;const t=d.value.filter(x=>x.name.toLowerCase().includes(l.toLowerCase()));t.length==0?u.value=s:u.value=t},T=()=>{setTimeout(()=>{r.value=!1},100)},H=async l=>{f.value=await Z(l,f.value),d.value.pop(),d.value=f.value[E(l)],u.value=[...d.value],r.value=!0,h.value.name=""},P=async()=>{if(!U(o.pickup_time))return j();o.pickup_time=D(o.pickup_time),o.post(route("pickups.store"),{preserveScroll:!0,onSuccess:l=>{console.log(l),R("Pickup creado exitosamente"),M()},onerror:l=>{console.log(l),alert(l)},onFinish:()=>{o.reset()}})};return(l,s)=>(n(),i("section",O,[e("div",W,[e("div",q,[e("header",I,[J,e("div",{class:S({hidden:!a(o).zone})},[p(G,{zone:a(o).zone},null,8,["zone"])],2),e("form",{onSubmit:V(P,["prevent"]),autocomplete:"off"},[e("div",Q,[e("div",X,[Y,v(e("select",{id:"zone",onChange:s[0]||(s[0]=t=>H(t.target.value)),"onUpdate:modelValue":s[1]||(s[1]=t=>a(o).zone=t),name:"zone",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[ee,a(w)()?(n(!0),i(_,{key:0},b(a(w)(),t=>(n(),i("option",{class:"capitalize",value:t.id,selected:m.params.zone==t.id},g(t.name),9,te))),256)):(n(),i("option",oe,"no disponibles"))],544),[[k,a(o).zone]])]),se,e("div",le,[ae,p(y,{autcomplete:"off",id:"hotelName",placeholder:"Nombre del hotel...",class:"w-full",value:h.value.name,onFocus:s[2]||(s[2]=t=>r.value=!0),onBlur:s[3]||(s[3]=t=>T()),onInput:s[4]||(s[4]=t=>F(t.target.value))},null,8,["value"]),v(e("input",{type:"hidden",name:"hotel","onUpdate:modelValue":s[5]||(s[5]=t=>a(o).hotel=t)},null,512),[[C,a(o).hotel]]),v(e("div",ie,[e("ul",ne,[(n(!0),i(_,null,b(u.value,t=>(n(),i("li",{class:"hover:bg-sky-500 hover:text-white p-4 cursor-pointer",onClick:x=>z(t)},g(t.name),9,de))),256))])],512),[[N,r.value&&d.value.length>0]])]),re,e("div",ue,[ce,v(e("select",{id:"tour","onUpdate:modelValue":s[6]||(s[6]=t=>a(o).activity=t),name:"tour",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[me,m.tours?(n(!0),i(_,{key:0},b(m.tours,t=>(n(),i("option",{class:"capitalize",value:t.id,selected:m.params.activity==t.id},g(t.name),9,pe))),256)):(n(),i("option",ve,"Tours no disponibles"))],512),[[k,a(o).activity]])]),fe,e("div",he,[_e,p(y,{id:"tourPickupTime",placeholder:"hh:mm...",class:"w-full",modelValue:a(o).pickup_time,"onUpdate:modelValue":s[7]||(s[7]=t=>a(o).pickup_time=t)},null,8,["modelValue"])])]),e("div",be,[e("button",ge,[p(A,{msg:"Guardar",isLoading:a(o).processing},null,8,["isLoading"])])])],40,K)])])])]))}};export{He as default};
