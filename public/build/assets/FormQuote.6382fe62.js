import{J as j,u as E,M as P,o as i,d as r,a as o,f as v,t as p,g as t,b as c,w as m,v as x,A as L,e as f,N as A,O as g,F as y,h as w,P as O,Q as G,R as J}from"./app.627b33b7.js";import{_ as K}from"./FormSection.ed45cb9f.js";import V from"./InputNumber.5e314b63.js";import h from"./InputLabel.72076edb.js";import $ from"./InputText.8fffd6df.js";import W from"./Summary.04f3eaae.js";import F from"./InputDate.ab0ad6b3.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";import"./SectionTitle.2ad8dc08.js";const n=j({season:"low",hotels:{cancun:null,rm:null},cancunHotels:null,rmHotels:null,tours:[],nPackTours:0,nTours:[],tour:{activity:0,pickup:"12:00",hotel:null},resume:{total:{adults:0,minors:0}},prices:{totalPublicPrice:0,totalAgencyPrice:0,reference:0,cost:{adult:0,minor:0},profit:{percentage:5,amount:0}}}),Y=async(a,_=null)=>await(await fetch(a,_)).json(),N=async()=>{const a=await fetch(route("tours"));n.tours=await a.json()},U=async a=>await Y(route("hotels",{zone:a})),ee=async a=>n.hotels=await U(a),te=async(a,_)=>await(await fetch(route("nd.pickup.get",{activity:a,hotel:_}))).json(),B=async(a,_)=>!a||!_?null:await te(a,_),oe=async(a,_,e)=>{n.nTours[a].pickup=await B(_,e).then(k=>k.pickup_time)},se=a=>["2022-12-26","2022-12-27","2022-12-28","2022-12-29","2022-12-30","2022-12-31"].includes(a)?"high":"low",T=async(a,_,e)=>await(await fetch(route("prices",{activity:a,zone:_,season:e}))).json(),ne=async a=>a==1&&!n.hotels.cancun?(n.hotels.cancun=[...await U(1)],n):n.hotels.cancun?n:(a==2||a==3)&&!n.hotels.rm?(n.hotels.rm=[...await U(2)],n):(n.hotels.rm,n),le=new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),S=a=>{var e;return(e=["no especificada","entrada","tour","paquete"][a])!=null?e:"invalida"},z=(a,_)=>Number(Number(a)+Number(_)).toFixed(2);const u=a=>(G("data-v-0fbaa5da"),a=a(),J(),a),ae={class:"p-6 sm:px-20 bg-white border-b border-gray-200"},ie={class:"mt-4 text-2xl text-center"},re={class:"text-lg"},de=u(()=>o("div",{class:"md:mx-14 md:my-10 font-bold"},"Resumen de la cotizaci\xF3n.",-1)),ue={class:"mb-4"},ce=u(()=>o("br",null,null,-1)),pe=u(()=>o("br",null,null,-1)),me=u(()=>o("br",null,null,-1)),fe=u(()=>o("div",{class:"col-span-6"},[o("div",{class:"max-w-xl text-sm text-gray-600"}," Por favor llene el siguiente formulario para poder realizar su cotizaci\xF3n. ")],-1)),_e={class:"flex items-center justify-center px-12 pt-4 col-span-6 sm:col-span-4"},ve={class:"mx-auto w-full max-w-[550px]"},be={key:0,class:"mb-5"},he=u(()=>o("small",{class:"text-gray-400"},"Descuento para mexicanos, presentar INE o pasaporte.",-1)),xe={for:"nacionalesId",class:"flex items-center cursor-pointer text-base font-medium text-[#07074D]"},ye={class:"mr-2"},we={class:"relative"},ge=u(()=>o("div",{class:"toggle-path bg-gray-200 w-9 h-5 rounded-full shadow-inner"},null,-1)),ke=u(()=>o("div",{class:"toggle-circle absolute w-3.5 h-3.5 bg-white rounded-full shadow inset-y-0 left-0"},null,-1)),Ve={class:"mb-5"},Pe=u(()=>o("label",{class:"mb-3 block text-base font-medium text-[#07074D]"}," Tipo de reservaci\xF3n? ",-1)),Ae={class:"flex items-center space-x-6"},Te={class:"flex items-center"},ze=u(()=>o("label",{for:"radioButton1",class:"pl-3 text-base font-medium text-[#07074D]"}," Entrada ",-1)),Ue={class:"flex items-center"},Re=u(()=>o("label",{for:"radioButton2",class:"pl-3 text-base font-medium text-[#07074D]"}," Tour ",-1)),$e={class:"flex items-center"},Fe=u(()=>o("label",{for:"radioButton3",class:"pl-3 text-base font-medium text-[#07074D]"}," Paquete ",-1)),Ne={key:1,class:"-mx-3 flex flex-wrap"},Se={class:"w-full px-3"},Be={class:"mb-5"},Ie={key:0,class:"text-red-500"},Ce={class:"-mx-3 flex flex-wrap"},De={class:"w-full px-3"},He={class:"mb-5"},qe={class:"flex flex-wrap justify-between"},Me={class:"mb-5 w-28"},Qe={class:"mb-5 w-28"},Ze=u(()=>o("br",null,null,-1)),je=u(()=>o("br",null,null,-1)),Ee={class:"mb-5 w-28"},Le={key:2,class:"-mx-3 flex flex-wrap"},Oe={class:"w-full px-3"},Ge={class:"mb-5"},Je=u(()=>o("option",{value:"null",disabled:"",selected:""},"-- Seleccione un parque --",-1)),Ke=["value"],We={key:3,class:"-mx-3 flex flex-wrap"},Xe={class:"w-full px-3"},Ye={class:"mb-5"},et=u(()=>o("label",{for:"fName",class:"mb-3 block text-base font-medium text-[#07074D]"}," Tour ",-1)),tt=u(()=>o("option",{value:"null",selected:"",disabled:""},"-- Seleccione un tour --",-1)),ot=["value"],st={key:4,class:"-mx-3 flex flex-wrap"},nt={class:"mb-5 w-28"},lt={key:5,class:"-mx-3 flex flex-wrap"},at={class:"w-full px-3"},it={class:"mb-5"},rt=u(()=>o("label",{for:"fName",class:"mb-3 block text-base font-medium text-[#07074D]"}," Tour ",-1)),dt=["onUpdate:modelValue"],ut=u(()=>o("option",{value:"null",selected:"",disabled:""}," -- Seleccione un tour -- ",-1)),ct=["value"],pt={class:"mb-5"},mt={key:0,class:"text-red-500"},ft={class:"mb-5"},_t=["onUpdate:modelValue"],vt=u(()=>o("option",{value:"null",selected:"",disabled:""},"-- Seleccione su zona --",-1)),bt=["value"],ht={class:"mb-5"},xt=["onInput","onFocusout","onUpdate:modelValue"],yt=u(()=>o("option",{value:"null",selected:"",disabled:""},"-- Seleccione un hotel --",-1)),wt=["value"],gt={key:0,class:"mb-5"},kt=u(()=>o("hr",null,null,-1)),Vt=u(()=>o("br",null,null,-1)),Pt={key:6,class:"-mx-3 flex flex-wrap"},At={class:"w-full px-3"},Tt={class:"mb-5"},zt=u(()=>o("option",{value:"null",selected:"",disabled:""},"-- Seleccione su zona --",-1)),Ut=["value"],Rt={key:7,class:"-mx-3 flex flex-wrap"},$t={class:"w-full px-3"},Ft={key:0,class:"mb-5"},Nt=u(()=>o("option",{value:"null",selected:"",disabled:""},"-- Seleccione un hotel --",-1)),St=["value"],Bt={class:"-mx-3 flex flex-wrap"},It={class:"w-full px-3"},Ct={class:"mb-5"},Dt=u(()=>o("button",{class:"hover:shadow-form rounded-md bg-[#6A64F1] py-3 px-8 text-center text-base font-semibold text-white outline-none"}," Enviar Cotizaci\xF3n ",-1)),Ht={__name:"FormQuote",props:{parks:Array,zones:Array},setup(a){const _=a,e=E({fechaReservacion:new Date().toISOString().split("T")[0],fechaActividad:null,precioPublico:0,tipoReservacion:1,nacionales:!1,nombreTitular:"",importeVenta:0,pickUp:null,infantes:0,notas:null,adultos:1,menores:0,zona:null,season:"low",actividad:null}),k=()=>{n.resume.total.adults=e.adultos*n.prices.cost.adult,n.resume.total.minors=e.menores*n.prices.cost.minor,n.prices.totalPublicPrice=z(n.resume.total.adults,n.resume.total.minors),e.precioPublico=n.prices.totalPublicPrice,e.importeVenta=I().toFixed(2),n.prices.totalAgencyPrice=e.importeVenta,n.prices.reference=(n.prices.totalPublicPrice-n.prices.totalAgencyPrice).toFixed(2),console.log(n)},I=()=>n.prices.totalPublicPrice*((100-n.prices.profit.percentage)/100),C=async()=>{const b=await T(e.actividad,e.nacionales?4:5,e.season);n.prices.cost.adult=b.adult.amount,n.prices.cost.minor=b.minor.amount,k()},D=async(b,l,s)=>{const d=await T(b,l,s);n.prices.cost.adult=d.adult.amount,n.prices.cost.minor=d.minor.amount,k()},H=b=>b>0?"$"+b:"";P(()=>{e.nacionales=e.tipoReservacion!=1?!1:e.nacionales}),P(()=>{e.season=se(e.fechaActividad)}),P(()=>{for(var b=[],l=n.nPackTours,s=0;s<l;s++)b.push({key:s+1,activity:null,zone:null,hotel:null,pickup:null,activity_date:null,public_price:null,agency_price:null});n.nTours=b});const q=async(b,l,s,d)=>{const R=await T(b,l,s);n.nTours[d].public_price=z(e.adultos*Number(R.adult.amount),e.menores*Number(R.minor.amount)),e.precioPublico=z(e.precioPublico,n.nTours[d].public_price),e.importeVenta+=e.precioPublico*((100-n.prices.profit.percentage)/100),console.log(n.nTours),console.log(e)},M=async(b,l)=>{var s;n.tour.pickup=(s=await B(b,l).then(d=>d.pickup_time))!=null?s:"00:00:00",e.actividad=n.tour,console.log(n)};function Q(){e.tipoReservacion==3&&(e.actividad=n.nTours),e.tipoReservacion=S(e.tipoReservacion)}function Z(){Q(),e.post(route("quote.store")),location.reload()}return(b,l)=>(i(),r("div",null,[o("div",ae,[o("div",ie,[v(" Nueva cotizaci\xF3n "),o("p",re,"Fecha de hoy: "+p(t(le)),1)])]),c(K,{onSubmitted:Z},{title:m(()=>[de]),description:m(()=>[c(W,null,{header:m(()=>[v(" Precio al publico "+p(H(t(n).prices.totalPublicPrice)),1)]),content:m(()=>[o("p",ue,"( Temporada "+p(t(e).season=="low"?"Baja":"Alta")+", Tarifa "+p(t(e).nacionales?"Nacional":"Internacional")+")",1),o("p",null,"A nombre de: "+p(t(e).nombreTitular),1),ce,o("p",null,"Adultos: "+p(`${t(e).adultos} x $${t(n).prices.cost.adult} = $${t(e).adultos*t(n).prices.cost.adult}`),1),o("p",null,"Menores: "+p(`${t(e).menores} x $${t(n).prices.cost.minor} = $${t(e).menores*t(n).prices.cost.minor}`),1),o("p",null,"Infantes: "+p(`${t(e).infantes}`)+" - no pagan",1),pe,o("p",null,"Tipo de reserva: "+p(t(S)(t(e).tipoReservacion)),1),me,o("p",null,"Precio sugerido al publico: $"+p(t(n).prices.totalPublicPrice),1),o("p",null,"Costo para la agencia: $"+p(t(n).prices.totalAgencyPrice),1)]),_:1})]),form:m(()=>[fe,o("div",_e,[o("div",ve,[t(e).tipoReservacion==1?(i(),r("div",be,[he,o("label",xe,[o("span",ye,"Nacionales? "+p(t(e).nacionales?"Si":"No"),1),o("div",we,[x(o("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>t(e).nacionales=s),id:"nacionalesId",type:"checkbox",class:"hidden"},null,512),[[L,t(e).nacionales]]),ge,ke])])])):f("",!0),o("div",Ve,[Pe,o("div",Ae,[o("div",Te,[x(o("input",{value:"1",type:"radio",name:"tipoReservacion",id:"radioButton1",checked:"",class:"h-5 w-5","onUpdate:modelValue":l[1]||(l[1]=s=>t(e).tipoReservacion=s)},null,512),[[A,t(e).tipoReservacion]]),ze]),o("div",Ue,[x(o("input",{onClick:l[2]||(l[2]=()=>t(N)()),value:"2",type:"radio",name:"tipoReservacion",id:"radioButton2",class:"h-5 w-5","onUpdate:modelValue":l[3]||(l[3]=s=>t(e).tipoReservacion=s)},null,512),[[A,t(e).tipoReservacion]]),Re]),o("div",$e,[x(o("input",{onClick:l[4]||(l[4]=()=>t(N)()),value:"3",type:"radio",name:"tipoReservacion",id:"radioButton3",class:"h-5 w-5","onUpdate:modelValue":l[5]||(l[5]=s=>t(e).tipoReservacion=s)},null,512),[[A,t(e).tipoReservacion]]),Fe])])]),t(e).tipoReservacion?(i(),r("div",Ne,[o("div",Se,[o("div",Be,[c(h,{for:"fechaAvtidad"},{default:m(()=>[v(" Fecha de actividad "),t(e).errors.fechaActividad?(i(),r("span",Ie,"* Por favor llene este campo")):f("",!0)]),_:1}),c(F,{required:"",modelValue:t(e).fechaActividad,"onUpdate:modelValue":l[6]||(l[6]=s=>t(e).fechaActividad=s),"id-name":"fechaActividad"},null,8,["modelValue"])])])])):f("",!0),o("div",Ce,[o("div",De,[o("div",He,[c(h,{for:"QuoteTitular"},{default:m(()=>[v(" Nombre del titular ")]),_:1}),c($,{placeholder:"Aa",id:"QuoteTitular",name:"nombreTitular",modelValue:t(e).nombreTitular,"onUpdate:modelValue":l[7]||(l[7]=s=>t(e).nombreTitular=s)},null,8,["modelValue"])])])]),o("div",qe,[o("div",Me,[c(h,{for:"adultos"},{default:m(()=>[v(" Adultos ")]),_:1}),c(V,{"id-name":"adultos",modelValue:t(e).adultos,"onUpdate:modelValue":l[8]||(l[8]=s=>t(e).adultos=s)},null,8,["modelValue"])]),o("div",Qe,[c(h,{for:"menores"},{default:m(()=>[v(" Menores ")]),_:1}),c(V,{"id-name":"menores",modelValue:t(e).menores,"onUpdate:modelValue":l[9]||(l[9]=s=>t(e).menores=s)},null,8,["modelValue"])]),Ze,je,o("div",Ee,[c(h,{for:"infantes"},{default:m(()=>[v(" Infantes ")]),_:1}),c(V,{"id-name":"infantes",modelValue:t(e).infantes,"onUpdate:modelValue":l[10]||(l[10]=s=>t(e).infantes=s)},null,8,["modelValue"])])]),t(e).tipoReservacion==1?(i(),r("div",Le,[o("div",Oe,[o("div",Ge,[c(h,{for:"park"},{default:m(()=>[v(" Parque ")]),_:1}),x(o("select",{onChange:l[11]||(l[11]=s=>C()),"onUpdate:modelValue":l[12]||(l[12]=s=>t(e).actividad=s),id:"park",name:"parque",ref:"park",class:"capitalize w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[Je,(i(!0),r(y,null,w(_.parks,s=>(i(),r("option",{class:"capitalize",value:s.id},p(s.name),9,Ke))),256))],544),[[g,t(e).actividad]])])])])):f("",!0),t(e).tipoReservacion==2?(i(),r("div",We,[o("div",Xe,[o("div",Ye,[et,t(n).tours?x((i(),r("select",{key:0,"onUpdate:modelValue":l[13]||(l[13]=s=>t(n).tour.activity=s),name:"parque",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[tt,(i(!0),r(y,null,w(t(n).tours,s=>(i(),r("option",{class:"capitalize",value:s.id},p(s.name),9,ot))),256))],512)),[[g,t(n).tour.activity]]):f("",!0)])])])):f("",!0),t(e).tipoReservacion==3?(i(),r("div",st,[o("div",nt,[c(h,{for:"number_of_activitys"},{default:m(()=>[v(" Numero de actividades ")]),_:1}),c(V,{modelValue:t(n).nPackTours,"onUpdate:modelValue":l[14]||(l[14]=s=>t(n).nPackTours=s),modelModifiers:{number:!0},"id-name":"number_of_activitys"},null,8,["modelValue"])])])):f("",!0),t(e).tipoReservacion==3&&t(n).nTours!=0?(i(),r("div",lt,[(i(!0),r(y,null,w(t(n).nTours,s=>(i(),r("div",at,[o("h2",null,"Actividad "+p(s.key),1),o("div",it,[rt,t(n).tours?x((i(),r("select",{key:0,"onUpdate:modelValue":d=>s.activity=d,name:"Activity",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[ut,(i(!0),r(y,null,w(t(n).tours,d=>(i(),r("option",{class:"capitalize",value:d.id},p(d.name),9,ct))),256))],8,dt)),[[g,s.activity]]):f("",!0)]),o("div",pt,[c(h,{for:"fechaAvtidad"+s.key},{default:m(()=>[v(" Fecha de actividad "),t(e).errors.fechaActividad?(i(),r("span",mt,"* Por favor llene este campo")):f("",!0)]),_:2},1032,["for"]),c(F,{required:"",modelValue:s.activity_date,"onUpdate:modelValue":d=>s.activity_date=d,"id-name":"fechaActividad"+s.key},null,8,["modelValue","onUpdate:modelValue","id-name"])]),o("div",ft,[c(h,{for:"zone"},{default:m(()=>[v(" Zona ")]),_:1}),x(o("select",{"onUpdate:modelValue":d=>s.zone=d,onInput:l[15]||(l[15]=d=>t(ne)(d.target.value)),id:"zone",name:"zone",class:"capitalize w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[vt,(i(!0),r(y,null,w(a.zones,d=>(i(),r("option",{value:d.id},p(d.name),9,bt))),256))],40,_t),[[g,s.zone]])]),o("div",ht,[c(h,{for:"pickUpZone"},{default:m(()=>[v(" Hotel del pickup ")]),_:1}),t(n).hotels?x((i(),r("select",{key:0,onInput:d=>q(s.activity,s.zone,t(e).season,s.key-1),onFocusout:d=>t(oe)(s.key-1,s.activity,s.hotel),"onUpdate:modelValue":d=>s.hotel=d,name:"pickUpZone",id:"pickUpZone",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[yt,t(n).hotels[s.zone==1?"cancun":"rm"]?(i(!0),r(y,{key:0},w(t(n).hotels[s.zone==1?"cancun":"rm"],d=>(i(),r("option",{class:"capitalize",value:d.id},p(d.name),9,wt))),256)):f("",!0)],40,xt)),[[g,s.hotel]]):f("",!0)]),s.pickup?(i(),r("div",gt,[c(h,null,{default:m(()=>[v(" Hora de su pickup ")]),_:1}),c($,{disabled:"","aria-disabled":"true",value:s.pickup.slice(0,5)},null,8,["value"])])):f("",!0),kt,Vt]))),256))])):f("",!0),t(e).tipoReservacion==2?(i(),r("div",Pt,[o("div",At,[o("div",Tt,[c(h,{for:"zone"},{default:m(()=>[v(" Zona ")]),_:1}),x(o("select",{"onUpdate:modelValue":l[16]||(l[16]=s=>t(e).zona=s),onChange:l[17]||(l[17]=s=>t(ee)(s.target.value)),id:"zone",name:"zone",class:"capitalize w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[zt,(i(!0),r(y,null,w(a.zones,s=>(i(),r("option",{value:s.id},p(s.name),9,Ut))),256))],544),[[g,t(e).zona]])])])])):f("",!0),t(e).zona!==null&&t(e).tipoReservacion==2?(i(),r("div",Rt,[o("div",$t,[t(n).tour.activity?(i(),r("div",Ft,[c(h,{for:"pickUpZone"},{default:m(()=>[v(" Hotel del pickup ")]),_:1}),t(n).hotels?x((i(),r("select",{key:0,onInput:l[18]||(l[18]=s=>M(t(n).tour.activity,s.target.value)),onChange:l[19]||(l[19]=s=>D(t(n).tour.activity,t(e).zona,t(e).season)),"onUpdate:modelValue":l[20]||(l[20]=s=>t(n).tour.hotel=s),name:"pickUpZone",id:"pickUpZone",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[Nt,Array.isArray(t(n).hotels)?(i(!0),r(y,{key:0},w(t(n).hotels,s=>(i(),r("option",{class:"capitalize",value:s.id},p(s.name),9,St))),256)):f("",!0)],544)),[[g,t(n).tour.hotel]]):f("",!0)])):f("",!0)])])):f("",!0),o("div",Bt,[o("div",It,[o("div",Ct,[c(h,{for:"notes"},{default:m(()=>[v(" Notas ")]),_:1}),x(o("textarea",{"onUpdate:modelValue":l[21]||(l[21]=s=>t(e).notas=s),class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md",name:"note",id:"notes",cols:"30",rows:"10"},null,512),[[O,t(e).notas]])])])])])])]),actions:m(()=>[Dt]),_:1})]))}},Jt=X(Ht,[["__scopeId","data-v-0fbaa5da"]]);export{Jt as default};
