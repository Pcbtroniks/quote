import{J as M,u as E,O as T,o as i,d as r,a as t,f as v,t as p,g as e,b as c,w as m,v as x,A as L,e as _,P as z,E as k,F as y,h as w,Q as G,R as J,S as O}from"./app.3ae05259.js";import{_ as K}from"./FormSection.e7987a41.js";import V from"./InputNumber.f3464fe4.js";import b from"./InputLabel.c16c3f14.js";import F from"./InputText.67d00fc6.js";import W from"./Summary.993f26da.js";import{_ as X}from"./Alert.3d4e1f48.js";import S from"./InputDate.b391748e.js";import{_ as Y}from"./_plugin-vue_export-helper.cdc0426e.js";import"./SectionTitle.76d1d498.js";const n=M({season:"low",hotels:{cancun:null,pdc:null,rm:null},cancunHotels:null,rmHotels:null,tours:[],nPackTours:0,nTours:[],tour:{activity:0,pickup:null,hotel:null},resume:{total:{adults:0,minors:0}},prices:{totalPublicPrice:0,totalAgencyPrice:0,reference:0,cost:{adult:0,minor:0},profit:{percentage:5,amount:0}}}),ee=async(a,f=null)=>await(await fetch(a,f)).json(),N=async()=>{const a=await fetch(route("tours"));n.tours=await a.json()},P=async a=>await ee(route("hotels",{zone:a})),oe=async a=>n.hotels=await P(a),te=async(a,f)=>await(await fetch(route("nd.pickup.get",{activity:a,hotel:f}))).json(),I=async(a,f)=>await te(a,f),se=async(a,f,o)=>{var g;if(!f||!o)return console.warn(`acticity( ${f} )  or hotel( ${o} ) invalid:`),"00:00:00";n.nTours[a].pickup=(g=await I(f,o).then(A=>A.pickup_time))!=null?g:"00:00:00"},ne=a=>["2022-12-26","2022-12-27","2022-12-28","2022-12-29","2022-12-30","2022-12-31"].includes(a)?"high":"low",U=async(a,f,o)=>await(await fetch(route("prices",{activity:a,zone:f,season:o}))).json(),le=async a=>a==1&&!n.hotels.cancun?(n.hotels.cancun=[...await P(1)],n):a==1&&n.hotels.cancun?n:a==2&&!n.hotels.rm?(n.hotels.rm=[...await P(2)],n):a==2&&n.hotels.rm?n:a==3&&!n.hotels.pdc?(n.hotels.pdc=[...await P(3)],n):(a==3&&n.hotels.pdc,n),B=a=>({1:"cancun",2:"rm",3:"pdc"})[a],ae=new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),C=a=>{var o;return(o=["no especificada","entrada","tour","paquete"][a])!=null?o:"invalida"},$=(a,f)=>Number(Number(a)+Number(f)).toFixed(2),ie=a=>a>0?"$"+a:"";const u=a=>(J("data-v-0d0393b1"),a=a(),O(),a),re={class:"p-6 sm:px-20 bg-white border-b border-gray-200"},de={class:"mt-4 text-2xl text-center"},ue={class:"text-lg"},ce=u(()=>t("div",{class:"md:mx-14 md:my-10 font-bold"},"Resumen de la reserva.",-1)),pe={class:"mb-4"},me=u(()=>t("br",null,null,-1)),fe=u(()=>t("br",null,null,-1)),_e=u(()=>t("br",null,null,-1)),ve=u(()=>t("div",{class:"col-span-6"},[t("div",{class:"max-w-xl text-sm text-gray-600"}," Por favor llene el siguiente formulario para poder realizar su cotizaci\xF3n. ")],-1)),be={class:"flex items-center justify-center px-12 pt-4 col-span-6 sm:col-span-4"},he={class:"mx-auto w-full max-w-[550px]"},xe={key:0,class:"mb-5"},ye=u(()=>t("small",{class:"text-gray-400"},"Descuento para mexicanos, presentar INE o pasaporte.",-1)),we={for:"nacionalesId",class:"flex items-center cursor-pointer text-base font-medium text-[#07074D]"},ke={class:"mr-2"},ge={class:"relative"},Ve=u(()=>t("div",{class:"toggle-path bg-gray-200 w-9 h-5 rounded-full shadow-inner"},null,-1)),Pe=u(()=>t("div",{class:"toggle-circle absolute w-3.5 h-3.5 bg-white rounded-full shadow inset-y-0 left-0"},null,-1)),Ae={class:"mb-5"},Te=u(()=>t("label",{class:"mb-3 block text-base font-medium text-[#07074D]"}," Tipo de reservaci\xF3n? ",-1)),ze={class:"flex items-center space-x-6"},Ue={class:"flex items-center"},$e=u(()=>t("label",{for:"radioButton1",class:"pl-3 text-base font-medium text-[#07074D]"}," Entrada ",-1)),Re={class:"flex items-center"},Fe=u(()=>t("label",{for:"radioButton2",class:"pl-3 text-base font-medium text-[#07074D]"}," Tour ",-1)),Se={class:"flex items-center"},Ne=u(()=>t("label",{for:"radioButton3",class:"pl-3 text-base font-medium text-[#07074D]"}," Paquete ",-1)),Be={key:1,class:"-mx-3 flex flex-wrap"},Ce={class:"w-full px-3"},Ie={class:"mb-5"},De={key:0,class:"text-red-500"},He={class:"-mx-3 flex flex-wrap"},je={class:"w-full px-3"},qe={class:"mb-5"},Qe={class:"flex flex-wrap justify-between"},Ze={class:"mb-5 w-28"},Me={class:"mb-5 w-28"},Ee=u(()=>t("br",null,null,-1)),Le=u(()=>t("br",null,null,-1)),Ge={class:"mb-5 w-28"},Je={key:2,class:"-mx-3 flex flex-wrap"},Oe={class:"w-full px-3"},Ke={class:"mb-5"},We=u(()=>t("option",{value:"null",disabled:"",selected:""},"-- Seleccione un parque --",-1)),Xe=["value"],Ye={key:3,class:"-mx-3 flex flex-wrap"},eo={class:"w-full px-3"},oo={class:"mb-5"},to=u(()=>t("label",{for:"fName",class:"mb-3 block text-base font-medium text-[#07074D]"}," Tour ",-1)),so=u(()=>t("option",{value:"null",selected:"",disabled:""},"-- Seleccione un tour --",-1)),no=["value"],lo={key:4,class:"-mx-3 flex flex-wrap"},ao={class:"mb-5 w-28"},io={key:5,class:"-mx-3 flex flex-wrap"},ro={class:"w-full px-3"},uo={class:"mb-5"},co=u(()=>t("option",{value:"null",selected:"",disabled:""},"-- Seleccione su zona --",-1)),po=["value"],mo={key:6,class:"-mx-3 flex flex-wrap"},fo={class:"w-full px-3"},_o={key:0,class:"mb-5"},vo=u(()=>t("option",{value:"null",selected:"",disabled:""},"-- Seleccione un hotel --",-1)),bo=["value"],ho={key:7,class:"-mx-3 flex flex-wrap"},xo={key:8,class:"-mx-3 flex flex-wrap"},yo={class:"w-full px-3"},wo={class:"mb-5"},ko=u(()=>t("label",{for:"fName",class:"mb-3 block text-base font-medium text-[#07074D]"}," Tour ",-1)),go=["onUpdate:modelValue"],Vo=u(()=>t("option",{value:"null",selected:"",disabled:""}," -- Seleccione un tour -- ",-1)),Po=["value"],Ao={class:"mb-5"},To={key:0,class:"text-red-500"},zo={class:"mb-5"},Uo=["onUpdate:modelValue"],$o=u(()=>t("option",{value:"null",selected:"",disabled:""},"-- Seleccione su zona --",-1)),Ro=["value"],Fo={class:"mb-5"},So=["onInput","onFocusout","onUpdate:modelValue"],No=u(()=>t("option",{value:"null",selected:"",disabled:""},"-- Seleccione un hotel --",-1)),Bo=["value"],Co={key:0,class:"mb-5"},Io=u(()=>t("hr",null,null,-1)),Do=u(()=>t("br",null,null,-1)),Ho={class:"-mx-3 flex flex-wrap"},jo={class:"w-full px-3"},qo={class:"mb-5"},Qo=u(()=>t("button",{class:"hover:shadow-form rounded-md bg-[#6A64F1] py-3 px-8 text-center text-base font-semibold text-white outline-none"}," Enviar Cotizaci\xF3n ",-1)),Zo={__name:"FormQuote",props:{parks:Array,zones:Array},setup(a){const f=a,o=E({fechaActividad:null,tipoReservacion:1,nombreTitular:"",nacionales:!1,precioPublico:0,importeVenta:0,actividad:null,season:"low",pickUp:null,infantes:0,notas:null,adultos:1,menores:0,zona:null}),g=()=>{n.resume.total.adults=o.adultos*n.prices.cost.adult,n.resume.total.minors=o.menores*n.prices.cost.minor,n.prices.totalPublicPrice=$(n.resume.total.adults,n.resume.total.minors),o.precioPublico=n.prices.totalPublicPrice,o.importeVenta=A().toFixed(2),n.prices.totalAgencyPrice=o.importeVenta,n.prices.reference=(n.prices.totalPublicPrice-n.prices.totalAgencyPrice).toFixed(2),console.log(n)},A=()=>n.prices.totalPublicPrice*((100-n.prices.profit.percentage)/100),D=async()=>{const h=await U(o.actividad,o.nacionales?4:5,o.season);n.prices.cost.adult=h.adult.amount,n.prices.cost.minor=h.minor.amount,g()},H=async(h,l,s)=>{const d=await U(h,l,s);n.prices.cost.adult=d.adult.amount,n.prices.cost.minor=d.minor.amount,g()};T(()=>{o.nacionales=o.tipoReservacion!=1?!1:o.nacionales}),T(()=>{o.season=ne(o.fechaActividad)}),T(()=>{for(var h=[],l=n.nPackTours,s=0;s<l;s++)h.push({key:s+1,activity:null,zone:null,hotel:null,pickup:null,activity_date:null,public_price:null,agency_price:null});n.nTours=h});const j=async(h,l,s,d)=>{const R=await U(h,l,s);n.nTours[d].public_price=$(o.adultos*Number(R.adult.amount),o.menores*Number(R.minor.amount)),o.precioPublico=$(o.precioPublico,n.nTours[d].public_price),o.importeVenta+=o.precioPublico*((100-n.prices.profit.percentage)/100),console.log(n.nTours),console.log(o)},q=async(h,l)=>{var s;n.tour.pickup=(s=await I(h,l).then(d=>d.pickup_time))!=null?s:"00:00:00",o.actividad=n.tour,console.log("se ha a\xF1adido el pickup y seteado la actividad tour")};function Q(){o.tipoReservacion==3&&(o.actividad=n.nTours),o.tipoReservacion=C(o.tipoReservacion)}function Z(){Q()}return(h,l)=>(i(),r("div",null,[t("div",re,[t("div",de,[v(" Nueva reservaci\xF3n "),t("p",ue,"Fecha de hoy: "+p(e(ae)),1)])]),c(K,{onSubmitted:Z},{title:m(()=>[ce]),description:m(()=>[c(W,null,{header:m(()=>[v(" Precio al publico "+p(e(ie)(e(n).prices.totalPublicPrice)),1)]),content:m(()=>[t("p",pe,"( Temporada "+p(e(o).season=="low"?"Baja":"Alta")+", Tarifa "+p(e(o).nacionales?"Nacional":"Internacional")+")",1),t("p",null,"A nombre de: "+p(e(o).nombreTitular),1),me,t("p",null,"Adultos: "+p(`${e(o).adultos} x $${e(n).prices.cost.adult} = $${e(o).adultos*e(n).prices.cost.adult}`),1),t("p",null,"Menores: "+p(`${e(o).menores} x $${e(n).prices.cost.minor} = $${e(o).menores*e(n).prices.cost.minor}`),1),t("p",null,"Infantes: "+p(`${e(o).infantes}`)+" - no pagan",1),fe,t("p",null,"Tipo de reserva: "+p(e(C)(e(o).tipoReservacion)),1),_e,t("p",null,"Precio sugerido al publico: $"+p(e(n).prices.totalPublicPrice),1),t("p",null,"Costo para la agencia: $"+p(e(n).prices.totalAgencyPrice),1)]),_:1})]),form:m(()=>[ve,t("div",be,[t("div",he,[e(o).tipoReservacion==1?(i(),r("div",xe,[ye,t("label",we,[t("span",ke,"Nacionales? "+p(e(o).nacionales?"Si":"No"),1),t("div",ge,[x(t("input",{"onUpdate:modelValue":l[0]||(l[0]=s=>e(o).nacionales=s),id:"nacionalesId",type:"checkbox",class:"hidden"},null,512),[[L,e(o).nacionales]]),Ve,Pe])])])):_("",!0),t("div",Ae,[Te,t("div",ze,[t("div",Ue,[x(t("input",{value:"1",type:"radio",name:"tipoReservacion",id:"radioButton1",checked:"",class:"h-5 w-5","onUpdate:modelValue":l[1]||(l[1]=s=>e(o).tipoReservacion=s)},null,512),[[z,e(o).tipoReservacion]]),$e]),t("div",Re,[x(t("input",{onClick:l[2]||(l[2]=()=>e(N)()),value:"2",type:"radio",name:"tipoReservacion",id:"radioButton2",class:"h-5 w-5","onUpdate:modelValue":l[3]||(l[3]=s=>e(o).tipoReservacion=s)},null,512),[[z,e(o).tipoReservacion]]),Fe]),t("div",Se,[x(t("input",{onClick:l[4]||(l[4]=()=>e(N)()),value:"3",type:"radio",name:"tipoReservacion",id:"radioButton3",class:"h-5 w-5","onUpdate:modelValue":l[5]||(l[5]=s=>e(o).tipoReservacion=s)},null,512),[[z,e(o).tipoReservacion]]),Ne])])]),e(o).tipoReservacion?(i(),r("div",Be,[t("div",Ce,[t("div",Ie,[c(b,{for:"fechaAvtidad"},{default:m(()=>[v(" Fecha de actividad "),e(o).errors.fechaActividad?(i(),r("span",De,"* Por favor llene este campo")):_("",!0)]),_:1}),c(S,{required:"",modelValue:e(o).fechaActividad,"onUpdate:modelValue":l[6]||(l[6]=s=>e(o).fechaActividad=s),"id-name":"fechaActividad"},null,8,["modelValue"])])])])):_("",!0),t("div",He,[t("div",je,[t("div",qe,[c(b,{for:"QuoteTitular"},{default:m(()=>[v(" Nombre del titular ")]),_:1}),c(F,{placeholder:"Aa",id:"QuoteTitular",name:"nombreTitular",modelValue:e(o).nombreTitular,"onUpdate:modelValue":l[7]||(l[7]=s=>e(o).nombreTitular=s)},null,8,["modelValue"])])])]),t("div",Qe,[t("div",Ze,[c(b,{for:"adultos"},{default:m(()=>[v(" Adultos ")]),_:1}),c(V,{"id-name":"adultos",modelValue:e(o).adultos,"onUpdate:modelValue":l[8]||(l[8]=s=>e(o).adultos=s)},null,8,["modelValue"])]),t("div",Me,[c(b,{for:"menores"},{default:m(()=>[v(" Menores ")]),_:1}),c(V,{"id-name":"menores",modelValue:e(o).menores,"onUpdate:modelValue":l[9]||(l[9]=s=>e(o).menores=s)},null,8,["modelValue"])]),Ee,Le,t("div",Ge,[c(b,{for:"infantes"},{default:m(()=>[v(" Infantes ")]),_:1}),c(V,{"id-name":"infantes",modelValue:e(o).infantes,"onUpdate:modelValue":l[10]||(l[10]=s=>e(o).infantes=s)},null,8,["modelValue"])])]),e(o).tipoReservacion==1?(i(),r("div",Je,[t("div",Oe,[t("div",Ke,[c(b,{for:"park"},{default:m(()=>[v(" Parque ")]),_:1}),x(t("select",{onChange:l[11]||(l[11]=s=>D()),"onUpdate:modelValue":l[12]||(l[12]=s=>e(o).actividad=s),id:"park",name:"parque",ref:"park",class:"capitalize w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[We,(i(!0),r(y,null,w(f.parks,s=>(i(),r("option",{class:"capitalize",value:s.id},p(s.name),9,Xe))),256))],544),[[k,e(o).actividad]])])])])):_("",!0),e(o).tipoReservacion==2?(i(),r("div",Ye,[t("div",eo,[t("div",oo,[to,e(n).tours?x((i(),r("select",{key:0,"onUpdate:modelValue":l[13]||(l[13]=s=>e(n).tour.activity=s),name:"parque",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[so,(i(!0),r(y,null,w(e(n).tours,s=>(i(),r("option",{class:"capitalize",value:s.id},p(s.name),9,no))),256))],512)),[[k,e(n).tour.activity]]):_("",!0)])])])):_("",!0),e(o).tipoReservacion==3?(i(),r("div",lo,[t("div",ao,[c(b,{for:"number_of_activitys"},{default:m(()=>[v(" Numero de actividades ")]),_:1}),c(V,{modelValue:e(n).nPackTours,"onUpdate:modelValue":l[14]||(l[14]=s=>e(n).nPackTours=s),modelModifiers:{number:!0},"id-name":"number_of_activitys"},null,8,["modelValue"])])])):_("",!0),e(o).tipoReservacion==2?(i(),r("div",io,[t("div",ro,[t("div",uo,[c(b,{for:"zone"},{default:m(()=>[v(" Zona ")]),_:1}),x(t("select",{"onUpdate:modelValue":l[15]||(l[15]=s=>e(o).zona=s),onChange:l[16]||(l[16]=s=>e(oe)(s.target.value)),id:"zone",name:"zone",class:"capitalize w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[co,(i(!0),r(y,null,w(a.zones,s=>(i(),r("option",{value:s.id},p(s.name),9,po))),256))],544),[[k,e(o).zona]])])])])):_("",!0),e(o).zona!==null&&e(o).tipoReservacion==2?(i(),r("div",mo,[t("div",fo,[e(n).tour.activity?(i(),r("div",_o,[c(b,{for:"pickUpZone"},{default:m(()=>[v(" Hotel del pickup ")]),_:1}),e(n).hotels?x((i(),r("select",{key:0,onInput:l[17]||(l[17]=s=>q(e(n).tour.activity,s.target.value)),onChange:l[18]||(l[18]=s=>H(e(n).tour.activity,e(o).zona,e(o).season)),"onUpdate:modelValue":l[19]||(l[19]=s=>e(n).tour.hotel=s),name:"pickUpZone",id:"pickUpZone",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[vo,Array.isArray(e(n).hotels)?(i(!0),r(y,{key:0},w(e(n).hotels,s=>(i(),r("option",{class:"capitalize",value:s.id},p(s.name),9,bo))),256)):_("",!0)],544)),[[k,e(n).tour.hotel]]):_("",!0)])):_("",!0)])])):_("",!0),e(o).tipoReservacion==2&&e(n).tour.pickup?(i(),r("div",ho,[c(X,{msg:e(n).tour.pickup=="00:00:00"?"Lo sentimos, por el momento no tenemos un pickup disponible, estamos trabajando en ello.":`Su pickup sera a las: ${e(n).tour.pickup.slice(0,5)} hrs. en el hotel especificado, procure tener al menos 15 minutos de antelaci\xF3n.`},null,8,["msg"])])):_("",!0),e(o).tipoReservacion==3&&e(n).nTours!=0?(i(),r("div",xo,[(i(!0),r(y,null,w(e(n).nTours,s=>(i(),r("div",yo,[t("h2",null,"Actividad "+p(s.key),1),t("div",wo,[ko,e(n).tours?x((i(),r("select",{key:0,"onUpdate:modelValue":d=>s.activity=d,name:"Activity",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[Vo,(i(!0),r(y,null,w(e(n).tours,d=>(i(),r("option",{class:"capitalize",value:d.id},p(d.name),9,Po))),256))],8,go)),[[k,s.activity]]):_("",!0)]),t("div",Ao,[c(b,{for:"fechaAvtidad"+s.key},{default:m(()=>[v(" Fecha de actividad "),e(o).errors.fechaActividad?(i(),r("span",To,"* Por favor llene este campo")):_("",!0)]),_:2},1032,["for"]),c(S,{required:"",modelValue:s.activity_date,"onUpdate:modelValue":d=>s.activity_date=d,"id-name":"fechaActividad"+s.key},null,8,["modelValue","onUpdate:modelValue","id-name"])]),t("div",zo,[c(b,{for:"zone"},{default:m(()=>[v(" Zona ")]),_:1}),x(t("select",{"onUpdate:modelValue":d=>s.zone=d,onInput:l[20]||(l[20]=d=>e(le)(d.target.value)),id:"zone",name:"zone",class:"capitalize w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[$o,(i(!0),r(y,null,w(a.zones,d=>(i(),r("option",{value:d.id},p(d.name),9,Ro))),256))],40,Uo),[[k,s.zone]])]),t("div",Fo,[c(b,{for:"pickUpZone"},{default:m(()=>[v(" Hotel del pickup ")]),_:1}),e(n).hotels?x((i(),r("select",{key:0,onInput:d=>j(s.activity,s.zone,e(o).season,s.key-1),onFocusout:d=>e(se)(s.key-1,s.activity,s.hotel),"onUpdate:modelValue":d=>s.hotel=d,name:"pickUpZone",id:"pickUpZone",class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md"},[No,e(n).hotels[e(B)(s.zone)]?(i(!0),r(y,{key:0},w(e(n).hotels[e(B)(s.zone)],d=>(i(),r("option",{class:"capitalize",value:d.id},p(d.name),9,Bo))),256)):_("",!0)],40,So)),[[k,s.hotel]]):_("",!0)]),s.pickup?(i(),r("div",Co,[c(b,null,{default:m(()=>[v(" Hora de su pickup ")]),_:1}),c(F,{disabled:"","aria-disabled":"true",value:s.pickup.slice(0,5)},null,8,["value"])])):_("",!0),Io,Do]))),256))])):_("",!0),t("div",Ho,[t("div",jo,[t("div",qo,[c(b,{for:"notes"},{default:m(()=>[v(" Notas ")]),_:1}),x(t("textarea",{"onUpdate:modelValue":l[21]||(l[21]=s=>e(o).notas=s),class:"w-full rounded-md border border-[#e0e0e0] bg-white py-3 px-6 text-base font-medium text-[#6B7280] outline-none focus:border-[#6A64F1] focus:shadow-md",name:"note",id:"notes",cols:"30",rows:"10"},null,512),[[G,e(o).notas]])])])])])])]),actions:m(()=>[Qo]),_:1})]))}},et=Y(Zo,[["__scopeId","data-v-0d0393b1"]]);export{et as default};
