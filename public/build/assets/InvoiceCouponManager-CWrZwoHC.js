import{d as H}from"./index-BjWp-Esz.js";import{d as g,r as k,e as n,o as r,f as c,b as a,w as s,u as o,g as i,n as u,a as l,F as x,h as C,t as f}from"./app-CakD0I0F.js";import{_ as J}from"./ActionMessage-D-4_OOcP.js";import{_ as F}from"./ActionSection-Cc7HKjPI.js";import{_ as A}from"./ConfirmationModal-UnRHG5sD.js";import{_ as B}from"./DangerButton-DVfSIgeU.js";import{_ as K}from"./DialogModal-BQ12wTdc.js";import{_ as Q}from"./FormSection-Dl3KXjiy.js";import{_ as j}from"./InputError-1IVOgEiY.js";import{_ as P}from"./InputLabel-CXdxZ5sX.js";import{_ as z}from"./PrimaryButton-JBT9IJEb.js";import{_ as R}from"./SecondaryButton-CntyZk85.js";import{S as M}from"./SectionBorder-DW3KJ3gD.js";import{_ as W}from"./TextInput-CAz4_qUd.js";import"./SectionTitle-CR2o7fHP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-DHT81mSx.js";const X={key:0},Y=l("div",{class:"col-span-6"},[l("div",{class:"max-w-xl text-sm text-gray-600"}," Please provide the email address of the person you would like to add to this team. ")],-1),Z={class:"col-span-6 sm:col-span-4"},ee={key:0,class:"col-span-6 lg:col-span-4"},se={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},te=["onClick"],oe={class:"flex items-center"},le={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},ae=l("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),ne=[ae],re={class:"mt-2 text-xs text-gray-600 text-left"},ie={key:1},me={class:"space-y-6"},de={class:"text-gray-600"},ce={class:"flex items-center"},ue=["onClick"],ve={key:2},pe={class:"space-y-6"},fe={class:"flex items-center"},_e=["src","alt"],be={class:"ml-4"},ye={class:"flex items-center"},ge=["onClick"],he={key:1,class:"ml-2 text-sm text-gray-400"},ke=["onClick"],xe={key:0},Ce={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},we=["onClick"],Te={class:"flex items-center"},$e={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},Re=l("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),Me=[Re],Se={class:"mt-2 text-xs text-gray-600"},Je={__name:"InvoiceCouponManager",props:{invoice:Object},setup(V){const b=V,d=g.useForm({email:"",role:null}),v=g.useForm({role:null}),w=g.useForm(),T=g.useForm(),y=k(!1),$=k(null),h=k(!1),_=k(null),L=()=>{d.post(route("team-members.store",b.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>d.reset()})},E=t=>{H.Inertia.delete(route("team-invitations.destroy",t),{preserveScroll:!0})},I=t=>{$.value=t,v.role=t.membership.role,y.value=!0},N=()=>{v.put(route("team-members.update",[b.team,$.value]),{preserveScroll:!0,onSuccess:()=>y.value=!1})},O=()=>{h.value=!0},D=()=>{w.delete(route("team-members.destroy",[b.team,g.usePage().props.value.user]))},U=t=>{_.value=t},q=()=>{T.delete(route("team-members.destroy",[b.team,_.value]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>_.value=null})},S=t=>b.availableRoles.find(m=>m.key===t).name;return(t,m)=>(r(),n("div",null,[t.userPermissions.canAddTeamMembers?(r(),n("div",X,[a(M),a(Q,{onSubmitted:L},{title:s(()=>[i(" Add Team Member ")]),description:s(()=>[i(" Add a new team member to your team, allowing them to collaborate with you. ")]),form:s(()=>[Y,l("div",Z,[a(P,{for:"email",value:"Email"}),a(W,{id:"email",modelValue:o(d).email,"onUpdate:modelValue":m[0]||(m[0]=e=>o(d).email=e),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),a(j,{message:o(d).errors.email,class:"mt-2"},null,8,["message"])]),t.availableRoles.length>0?(r(),n("div",ee,[a(P,{for:"roles",value:"Role"}),a(j,{message:o(d).errors.role,class:"mt-2"},null,8,["message"]),l("div",se,[(r(!0),n(x,null,C(t.availableRoles,(e,p)=>(r(),n("button",{key:e.key,type:"button",class:u(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":p>0,"rounded-b-none":p!=Object.keys(t.availableRoles).length-1}]),onClick:G=>o(d).role=e.key},[l("div",{class:u({"opacity-50":o(d).role&&o(d).role!=e.key})},[l("div",oe,[l("div",{class:u(["text-sm text-gray-600",{"font-semibold":o(d).role==e.key}])},f(e.name),3),o(d).role==e.key?(r(),n("svg",le,ne)):c("",!0)]),l("div",re,f(e.description),1)],2)],10,te))),128))])])):c("",!0)]),actions:s(()=>[a(J,{on:o(d).recentlySuccessful,class:"mr-3"},{default:s(()=>[i(" Added. ")]),_:1},8,["on"]),a(z,{class:u({"opacity-25":o(d).processing}),disabled:o(d).processing},{default:s(()=>[i(" Add ")]),_:1},8,["class","disabled"])]),_:1})])):c("",!0),t.team.team_invitations.length>0&&t.userPermissions.canAddTeamMembers?(r(),n("div",ie,[a(M),a(F,{class:"mt-10 sm:mt-0"},{title:s(()=>[i(" Pending Team Invitations ")]),description:s(()=>[i(" These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation. ")]),content:s(()=>[l("div",me,[(r(!0),n(x,null,C(t.team.team_invitations,e=>(r(),n("div",{key:e.id,class:"flex items-center justify-between"},[l("div",de,f(e.email),1),l("div",ce,[t.userPermissions.canRemoveTeamMembers?(r(),n("button",{key:0,class:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",onClick:p=>E(e)}," Cancel ",8,ue)):c("",!0)])]))),128))])]),_:1})])):c("",!0),t.team.users.length>0?(r(),n("div",ve,[a(M),a(F,{class:"mt-10 sm:mt-0"},{title:s(()=>[i(" Team Members ")]),description:s(()=>[i(" All of the people that are part of this team. ")]),content:s(()=>[l("div",pe,[(r(!0),n(x,null,C(t.team.users,e=>(r(),n("div",{key:e.id,class:"flex items-center justify-between"},[l("div",fe,[l("img",{class:"w-8 h-8 rounded-full",src:e.profile_photo_url,alt:e.name},null,8,_e),l("div",be,f(e.name),1)]),l("div",ye,[t.userPermissions.canAddTeamMembers&&t.availableRoles.length?(r(),n("button",{key:0,class:"ml-2 text-sm text-gray-400 underline",onClick:p=>I(e)},f(S(e.membership.role)),9,ge)):t.availableRoles.length?(r(),n("div",he,f(S(e.membership.role)),1)):c("",!0),t.$page.props.user.id===e.id?(r(),n("button",{key:2,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:O}," Leave ")):t.userPermissions.canRemoveTeamMembers?(r(),n("button",{key:3,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:p=>U(e)}," Remove ",8,ke)):c("",!0)])]))),128))])]),_:1})])):c("",!0),a(K,{show:y.value,onClose:m[2]||(m[2]=e=>y.value=!1)},{title:s(()=>[i(" Manage Role ")]),content:s(()=>[$.value?(r(),n("div",xe,[l("div",Ce,[(r(!0),n(x,null,C(t.availableRoles,(e,p)=>(r(),n("button",{key:e.key,type:"button",class:u(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":p>0,"rounded-b-none":p!==Object.keys(t.availableRoles).length-1}]),onClick:G=>o(v).role=e.key},[l("div",{class:u({"opacity-50":o(v).role&&o(v).role!==e.key})},[l("div",Te,[l("div",{class:u(["text-sm text-gray-600",{"font-semibold":o(v).role===e.key}])},f(e.name),3),o(v).role===e.key?(r(),n("svg",$e,Me)):c("",!0)]),l("div",Se,f(e.description),1)],2)],10,we))),128))])])):c("",!0)]),footer:s(()=>[a(R,{onClick:m[1]||(m[1]=e=>y.value=!1)},{default:s(()=>[i(" Cancel ")]),_:1}),a(z,{class:u(["ml-3",{"opacity-25":o(v).processing}]),disabled:o(v).processing,onClick:N},{default:s(()=>[i(" Save ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),a(A,{show:h.value,onClose:m[4]||(m[4]=e=>h.value=!1)},{title:s(()=>[i(" Leave Team ")]),content:s(()=>[i(" Are you sure you would like to leave this team? ")]),footer:s(()=>[a(R,{onClick:m[3]||(m[3]=e=>h.value=!1)},{default:s(()=>[i(" Cancel ")]),_:1}),a(B,{class:u(["ml-3",{"opacity-25":o(w).processing}]),disabled:o(w).processing,onClick:D},{default:s(()=>[i(" Leave ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),a(A,{show:_.value,onClose:m[6]||(m[6]=e=>_.value=null)},{title:s(()=>[i(" Remove Team Member ")]),content:s(()=>[i(" Are you sure you would like to remove this person from the team? ")]),footer:s(()=>[a(R,{onClick:m[5]||(m[5]=e=>_.value=null)},{default:s(()=>[i(" Cancel ")]),_:1}),a(B,{class:u(["ml-3",{"opacity-25":o(T).processing}]),disabled:o(T).processing,onClick:q},{default:s(()=>[i(" Remove ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{Je as default};
