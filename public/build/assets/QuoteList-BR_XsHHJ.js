import{e as a,o as n,s as N,r as g,d as C,b,a as t,K as V,w as m,t as s,F as y,h as $,c as D,f as u,g as p,l as E,M as I,u as _,n as z,L as O}from"./app-CPE2G4wC.js";import{S as A}from"./sweetalert2.all-aOwtR4aa.js";import{_ as H}from"./SecondaryButton-92YTonqN.js";import{_ as K}from"./PrimaryButton-BbnJda1Q.js";import{_ as Q}from"./DialogModal-BUJqXqqZ.js";import{_ as U}from"./Pagination-CUUNCxMF.js";import{F as L}from"./FormatNumber-CDCoFD-J.js";import"./Modal-D_Hc3a5v.js";const G=["type"],J={__name:"ThirdButton",props:{type:{type:String,default:"submit"}},setup(f){return(d,h)=>(n(),a("button",{type:f.type,class:"inline-flex items-center px-4 py-2 bg-mainblue border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring focus:ring-gray-300 disabled:opacity-25 transition"},[N(d.$slots,"default")],8,G))}},R={class:"font-bold text-gray-700"},W={class:"text-yellow-600"},X={class:"text-gray-700"},Y={class:"text-gray-700"},Z=t("div",{class:"h-8"},null,-1),q=t("p",{class:"font-bold text-xl text-gray-700"}," Actividades ",-1),tt=t("div",{class:"h-4"},null,-1),et=t("div",{class:"h-8"},null,-1),st=t("p",{class:"font-bold text-xl text-gray-700"}," Importes totales ",-1),ot=t("div",{class:"h-4"},null,-1),nt=t("div",{class:"h-8"},null,-1),at={class:"font-bold text-xl text-gray-700"},it={class:"self-center justify-start flex mr-4"},lt={key:0},rt=["href"],ct={class:"w-full antialiased bg-gray-100 text-gray-600"},dt={class:"flex flex-col justify-center h-full"},ut={class:"w-full mx-auto bg-white/5 shadow-lg rounded-sm border-2"},pt=t("header",{class:"px-5 py-4 border-b border-gray-100 bg-mainblue"},[t("h2",{class:"font-bold text-white text-2xl"},"Cotizaciones")],-1),_t={class:"p-3"},ht={class:"overflow-x-auto"},mt={class:"table-auto w-full"},ft={class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},vt=t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Fecha Act.")],-1),xt=t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"No. Cupon")],-1),wt={class:"p-2 whitespace-nowrap flex flex-col"},gt=t("option",{value:"none",selected:""},"Todas",-1),bt=["value","selected"],yt=t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Titular")],-1),kt=t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Pax")],-1),Ct=t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Fecha")],-1),$t=t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Tipo Act.")],-1),Ft=t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Divisa")],-1),Pt=t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Costo A.")],-1),Bt=t("th",{class:"p-2 whitespace-nowrap hidden"},[t("div",{class:"font-semibold text-left",title:"Precio Minimo Agencia"},"P.M. Agencia")],-1),St=t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Precio Publico")],-1),At={key:0,class:"p-2 whitespace-nowrap"},Lt=t("div",{class:"font-semibold text-left"},"...",-1),Mt=[Lt],Tt={class:"text-sm divide-y divide-gray-100"},jt={class:"p-2 whitespace-nowrap"},Nt={class:"flex items-center"},Vt={class:"font-medium text-gray-800"},Dt={class:"p-2 whitespace-nowrap"},Et={class:"flex items-center"},It={class:"font-medium text-gray-800 hover:text-green-500"},zt=["href"],Ot=t("svg",{class:"inline",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[t("path",{d:"M6.66669 9.33342C6.88394 9.55515 7.14325 9.73131 7.42944 9.85156C7.71562 9.97182 8.02293 10.0338 8.33335 10.0338C8.64378 10.0338 8.95108 9.97182 9.23727 9.85156C9.52345 9.73131 9.78277 9.55515 10 9.33342L12.6667 6.66676C13.1087 6.22473 13.357 5.62521 13.357 5.00009C13.357 4.37497 13.1087 3.77545 12.6667 3.33342C12.2247 2.89139 11.6251 2.64307 11 2.64307C10.3749 2.64307 9.77538 2.89139 9.33335 3.33342L9.00002 3.66676",stroke:"#22C55E","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M9.33336 6.66665C9.11611 6.44492 8.8568 6.26876 8.57061 6.14851C8.28442 6.02825 7.97712 5.96631 7.66669 5.96631C7.35627 5.96631 7.04897 6.02825 6.76278 6.14851C6.47659 6.26876 6.21728 6.44492 6.00003 6.66665L3.33336 9.33332C2.89133 9.77534 2.64301 10.3749 2.64301 11C2.64301 11.6251 2.89133 12.2246 3.33336 12.6666C3.77539 13.1087 4.37491 13.357 5.00003 13.357C5.62515 13.357 6.22467 13.1087 6.66669 12.6666L7.00003 12.3333",stroke:"#22C55E","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ht=["onClick"],Kt=["onClick"],Qt={class:"p-2 whitespace-nowrap"},Ut={class:"flex items-center"},Gt={class:"font-medium text-gray-800"},Jt={class:"p-2 whitespace-nowrap"},Rt={class:"flex items-center"},Wt={class:"p-2 whitespace-nowrap cursor-default"},Xt=["title"],Yt={class:"p-2 whitespace-nowrap cursor-default"},Zt={class:"p-2 whitespace-nowrap"},qt=["title"],te={key:0},ee={key:1},se=t("svg",{title:"Promomex",class:"inline",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[t("path",{d:"M9.16667 2.5L16.6667 10C17.0911 10.4745 17.0911 11.1922 16.6667 11.6667L11.6667 16.6667C11.1922 17.0911 10.4745 17.0911 10 16.6667L2.5 9.16667V5.83333C2.5 3.99238 3.99238 2.5 5.83333 2.5H9.16667",stroke:"#52525B","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"}),t("circle",{cx:"7.50004",cy:"7.49967",r:"1.66667",stroke:"#52525B","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"})],-1),oe=[se],ne={class:"p-2 whitespace-nowrap cursor-default"},ae={class:"text-left font-bold text-gray-500"},ie={class:"p-2 whitespace-nowrap cursor-default"},le={class:"text-left font-medium text-green-500",title:"Precio de venta"},re={class:"p-2 whitespace-nowrap cursor-default"},ce={class:"text-left font-medium text-green-500"},de={key:0,class:"p-2 whitespace-nowrap cursor-default"},ue=["href"],pe={class:"flex justify-center"},be={__name:"QuoteList",props:{quotes:Object,agencies:Array,params:Object},setup(f){const d=f,h=g(!1),o=g(null),M=l=>{A.fire({title:"Confirmar cupón?",text:"¡Se generara tu cupon para poder usarlo posteriormente!",icon:"question",showCancelButton:!0,confirmButtonColor:"#38bdf8",cancelButtonColor:"#d33",confirmButtonText:"Si, Solicitar!",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(O.post(route("coupon.request.code",l)).then(e=>{console.log(e)}).catch(e=>{console.log(e)}),A.fire("Confirmado!","Estamos generando tu cupon.","success").then(function(){location.reload()}))})},F=l=>{o.value={...l,tmpFolio:P(l)},h.value=!0},P=l=>{const i=l.team.name,e=["01","02","03","04","05","06","07","08","09","10","11","12"],[r,c,w]=l.created_at.split("/");return`${i.substring(0,3)}-${l.id}-${r}${e[c-1]}${w.substring(2,4)}`},k=g(!1),T=()=>{k.value=!k.value},x=g("text"),B=()=>{x.value=="text"?x.value="input":x.value="text"},v=C.useForm({coupon_status:d.params.coupon_status,from_date:d.params.from_date,to_date:d.params.to_date,team_id:d.params.to_date}),j=()=>{v.get(route("quote.index",v.data))};return console.log(d.quotes),(l,i)=>(n(),a(y,null,[b(Q,{show:h.value,onClose:i[3]||(i[3]=e=>h.value=!1)},V({title:m(()=>{var e,r,c;return[t("p",R,[p(" Número de solicitud "),t("span",W,s((e=o.value)==null?void 0:e.tmpFolio),1)]),t("p",X," Fecha: "+s(((c=(r=o.value)==null?void 0:r.listed_activities[0])==null?void 0:c.date_string_formatted)??"n/d"),1)]}),footer:m(()=>[t("div",it,[t("p",null,[p("Por: "+s(o.value.user.name)+" ",1),o.value.branch?(n(),a("span",lt,s(o.value.branch.name),1)):u("",!0)])]),t("a",{href:l.route("export.pdf.proform.quote",{quote:o.value.id})},[b(H,{onClick:i[0]||(i[0]=e=>h.value=!1)},{default:m(()=>[p(" Imprimir PDF ")]),_:1})],8,rt),o.value.status=="created"?(n(),D(K,{key:0,class:"ml-2",onClick:i[1]||(i[1]=e=>M(o.value))},{default:m(()=>[p(" confirmar ")]),_:1})):u("",!0),b(J,{class:"ml-2",onClick:i[2]||(i[2]=e=>h.value=!1)},{default:m(()=>[p(" Aceptar ")]),_:1})]),_:2},[o.value?{name:"content",fn:m(()=>[t("div",Y,[t("div",null,[t("p",null," Nombre: "+s(o.value.holder_name),1),t("p",null," Adultos: "+s(o.value.adults)+" - Menor: "+s(o.value.minors)+" - Infante: "+s(o.value.infants),1)]),Z,t("div",null,[q,tt,t("ul",null,[(n(!0),a(y,null,$(o.value.listed_activities,e=>{var r,c;return n(),a("li",null,s(`${e.activity.name} ${e.pickup_time!=null&&((r=e.pickup_time)==null?void 0:r.slice(0,5))!="00:00"?e.pickup_time.slice(0,5):""} ${((c=e.hotel)==null?void 0:c.name)??""}`),1)}),256))])]),et,t("div",null,[st,ot,t("p",null,"Precio publico: $"+s(o.value.public_price),1),t("p",null,"Precio a pagar: $"+s(o.value.cost_amount),1),nt,t("p",at," Comision: $"+s((o.value.public_price-o.value.cost_amount).toFixed(2)??"0"),1)])])]),key:"0"}:void 0]),1032,["show"]),t("section",ct,[t("div",dt,[t("div",ut,[pt,t("div",_t,[t("div",ht,[t("table",mt,[t("thead",ft,[t("tr",null,[vt,xt,t("th",wt,[x.value=="text"?(n(),a("div",{key:0,onClick:B,class:"font-semibold text-left cursor-pointer"},"Agencia")):(n(),a("div",{key:1,onDblclick:B},[E(t("select",{onChange:j,"onUpdate:modelValue":i[4]||(i[4]=e=>_(v).team_id=e),class:"border-none text-sm font-semibold w-full pl-1",name:"agency",id:"agency"},[gt,(n(!0),a(y,null,$(d.agencies,e=>(n(),a("option",{key:e.id,value:e.id,selected:_(v).team_id==e.id},s(e.name),9,bt))),128))],544),[[I,_(v).team_id]])],32))]),yt,kt,Ct,$t,Ft,Pt,Bt,St,_(C.usePage)().props.value.user.is_freetraveler_admin?(n(),a("th",At,Mt)):u("",!0)])]),t("tbody",Tt,[(n(!0),a(y,null,$(f.quotes.data,e=>{var r,c,w;return n(),a("tr",{key:e.id,class:"h-14 hover:bg-green-300"},[t("td",jt,[t("div",Nt,[t("div",Vt,s(((r=e.listed_activities[0])==null?void 0:r.date)??"n/d"),1)])]),t("td",Dt,[t("div",Et,[t("div",It,[(c=e==null?void 0:e.coupon)!=null&&c.code&&((w=e==null?void 0:e.coupon)==null?void 0:w.status)=="confirmed"?(n(),a("a",{key:0,href:l.route("quote.preview",e.uuid)},[t("div",null,[p(s(e.coupon.code)+" ",1),Ot])],8,zt)):e.status=="created"?(n(),a("button",{key:1,onClick:S=>F(e),class:"px-3 py-2 rounded-md text-sm font-medium border focus:outline-none focus:ring transition text-green-600 border-green-600 hover:text-white hover:bg-green-600 active:bg-sky-700 focus:ring-sky-300",type:"button"}," Confirmar ",8,Ht)):e.status=="pending"?(n(),a("button",{key:2,onClick:S=>F(e),class:"px-3 py-2 rounded-md text-sm font-medium border focus:outline-none focus:ring transition text-yellow-600 border-yellow-600 hover:text-white hover:bg-yellow-600 active:bg-yellow-700 focus:ring-yellow-300",type:"button"},s(P(e)),9,Kt)):u("",!0)])])]),t("td",Qt,[t("div",Ut,[t("div",Gt,s(e.team.name),1)])]),t("td",Jt,[t("div",Rt,[t("div",{onClick:i[5]||(i[5]=S=>T()),class:z([{"w-full text-clip":k.value},"font-medium text-gray-800 w-32 truncate cursor-pointer"])},s(e.holder_name),3)])]),t("td",Wt,[t("div",{class:"text-left",title:`Adultos ${e.adults}, Niños: ${e.minors}, Infantes: ${e.infants}`},s(e.adults)+"."+s(e.minors)+"."+s(e.infants),9,Xt)]),t("td",Yt,s(e.created_at??"n/d"),1),t("td",Zt,[t("div",{class:"text-left font-medium text-green-500 capitalize",title:e.type=="entrance"&&e.national=="1"?"Promomex":""},[p(s(e.type)+" ",1),e.type=="pack"?(n(),a("span",te,"#"+s(e.listed_activities.length),1)):u("",!0),e.type=="entrance"&&e.national=="1"?(n(),a("span",ee,oe)):u("",!0)],8,qt)]),t("td",ne,[t("div",ae,s(e.currency),1)]),t("td",ie,[t("div",le,s(_(L)(e.cost_amount)),1)]),t("td",re,[t("div",ce,s(_(L)(e.public_price)),1)]),_(C.usePage)().props.value.user.is_freetraveler_admin?(n(),a("td",de,[t("a",{href:l.route("quote.show",{uuid:e.uuid}),class:"text-left font-medium text-indigo-500 hover:text-sky-500 duration-150 hover:underline underline-offset-2"},"ver detalle",8,ue)])):u("",!0)])}),128))])])]),t("div",pe,[b(U,{params:d.params,links:f.quotes},null,8,["params","links"])])])])])])],64))}};export{be as default};
