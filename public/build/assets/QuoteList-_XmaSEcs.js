import{_ as j}from"./Pagination-D9P4TuQ1.js";import M from"./FilterForm-BqJn1b-L.js";import{_ as H}from"./DialogModal-BQ12wTdc.js";import{_ as T}from"./SecondaryButton-CntyZk85.js";import{_ as B}from"./PrimaryButton-JBT9IJEb.js";import{r as F,e as n,o as l,b as h,a as t,K as z,w as p,t as s,F as v,h as L,c as V,f as u,g as d,L as E}from"./app-CakD0I0F.js";import"./InputDate-DuiuxhCj.js";import"./InputLabel-BUuKD2Ae.js";import"./Button-P3OyeESd.js";import"./Modal-DHT81mSx.js";const I={class:"font-bold text-gray-700"},D={class:"text-yellow-600"},K={class:"text-gray-700"},O={class:"text-gray-700"},Z=t("div",{class:"h-8"},null,-1),G=t("p",{class:"font-bold text-xl text-gray-700"},"Actividades",-1),J=t("div",{class:"h-4"},null,-1),Q=t("div",{class:"h-8"},null,-1),R=t("p",{class:"font-bold text-xl text-gray-700"}," Importes totales ",-1),U=t("div",{class:"h-4"},null,-1),W=t("div",{class:"h-8"},null,-1),X={class:"font-bold text-xl text-gray-700"},Y={class:"self-center justify-start flex mr-4"},q={key:0},tt=["href"],et={class:"w-full antialiased bg-gray-100 text-gray-600"},st={class:"flex flex-col justify-center h-full"},ot={class:"w-full mx-auto bg-white shadow-lg rounded-sm border border-gray-200"},it={class:"px-5 py-4 border-b border-gray-100"},at=t("h2",{class:"font-semibold text-gray-800"},"Cotizaciones",-1),lt={class:"p-3"},nt={class:"overflow-x-auto"},ct={class:"table-auto w-full"},rt=t("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[t("tr",null,[t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"}," Fecha ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"}," No. Cupon ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"}," Agencia ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"}," Titular ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"}," Pax ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"}," Fecha Act. ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"}," Tipo Act. ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"}," Actividad ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"}," Costo A. ")]),t("th",{class:"p-2 whitespace-nowrap hidden"},[t("div",{class:"font-semibold text-left",title:"Precio Minimo Agencia"}," P.M. Agencia ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"}," Precio Publico ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left",title:"Hora del pickup"}," Hr. pickup ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left",title:"Hotel del pickup"}," Htl. pickup ")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-center"}," Zona ")])])],-1),dt={class:"text-sm divide-y divide-gray-100"},pt={class:"h-14 hover:bg-sky-300"},_t={class:"p-2 whitespace-nowrap"},ht={class:"flex items-center"},ut={class:"font-medium text-gray-800"},mt={class:"p-2 whitespace-nowrap"},ft={class:"flex items-center"},vt={class:"font-medium text-gray-800 hover:text-green-500"},wt=["href"],xt=t("svg",{class:"inline",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[t("path",{d:"M6.66669 9.33342C6.88394 9.55515 7.14325 9.73131 7.42944 9.85156C7.71562 9.97182 8.02293 10.0338 8.33335 10.0338C8.64378 10.0338 8.95108 9.97182 9.23727 9.85156C9.52345 9.73131 9.78277 9.55515 10 9.33342L12.6667 6.66676C13.1087 6.22473 13.357 5.62521 13.357 5.00009C13.357 4.37497 13.1087 3.77545 12.6667 3.33342C12.2247 2.89139 11.6251 2.64307 11 2.64307C10.3749 2.64307 9.77538 2.89139 9.33335 3.33342L9.00002 3.66676",stroke:"#22C55E","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M9.33336 6.66665C9.11611 6.44492 8.8568 6.26876 8.57061 6.14851C8.28442 6.02825 7.97712 5.96631 7.66669 5.96631C7.35627 5.96631 7.04897 6.02825 6.76278 6.14851C6.47659 6.26876 6.21728 6.44492 6.00003 6.66665L3.33336 9.33332C2.89133 9.77534 2.64301 10.3749 2.64301 11C2.64301 11.6251 2.89133 12.2246 3.33336 12.6666C3.77539 13.1087 4.37491 13.357 5.00003 13.357C5.62515 13.357 6.22467 13.1087 6.66669 12.6666L7.00003 12.3333",stroke:"#22C55E","stroke-linecap":"round","stroke-linejoin":"round"})],-1),gt=["onClick"],bt=["onClick"],yt={class:"p-2 whitespace-nowrap"},kt={class:"flex items-center"},Ct={class:"font-medium text-gray-800"},$t={class:"p-2 whitespace-nowrap"},At={class:"flex items-center"},Pt={class:"font-medium text-gray-800"},Bt={class:"p-2 whitespace-nowrap cursor-default"},Ft=["title"],Lt={class:"p-2 whitespace-nowrap cursor-default"},Nt={class:"p-2 whitespace-nowrap"},St=["title"],jt={key:0},Mt={key:1},Ht=t("svg",{title:"Promomex",class:"inline",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[t("path",{d:"M9.16667 2.5L16.6667 10C17.0911 10.4745 17.0911 11.1922 16.6667 11.6667L11.6667 16.6667C11.1922 17.0911 10.4745 17.0911 10 16.6667L2.5 9.16667V5.83333C2.5 3.99238 3.99238 2.5 5.83333 2.5H9.16667",stroke:"#52525B","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"}),t("circle",{cx:"7.50004",cy:"7.49967",r:"1.66667",stroke:"#52525B","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Tt=[Ht],zt={class:"p-2 whitespace-nowrap"},Vt={class:"text-left font-medium capitalize"},Et={class:"p-2 whitespace-nowrap cursor-default"},It={class:"text-left font-medium text-green-500",title:"Precio de venta"},Dt={class:"p-2 whitespace-nowrap cursor-default hidden"},Kt={class:"text-left font-medium text-green-500",title:"Precio de venta"},Ot={class:"p-2 whitespace-nowrap cursor-default"},Zt={class:"text-left font-medium text-green-500"},Gt={class:"p-2 whitespace-nowrap cursor-default"},Jt={class:"text-left font-medium text-green-500 truncate w-20",title:"Hora del pickup"},Qt={class:"p-2 whitespace-nowrap cursor-default"},Rt=["title"],Ut={class:"p-2 whitespace-nowrap"},Wt={class:"text-center capitalize"},Xt={class:"flex justify-center"},ce={__name:"QuoteList",props:{quotes:Object,agencies:Array},setup(f){const _=F(!1),o=F(null),N=i=>{Swal.fire({title:"Solicitar cupon?",text:"Se generara tu cupon para poder usarlo posteriormente!",icon:"question",showCancelButton:!0,confirmButtonColor:"#38bdf8",cancelButtonColor:"#d33",confirmButtonText:"Si, Solicitar!",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed&&(E.post(route("coupon.request.code",i)).then(e=>{console.log(e)}).catch(e=>{console.log(e)}),Swal.fire("Confirmado!","Estamos generando tu cupon.","success").then(function(){location.reload()}))})},w=i=>{o.value={...i,tmpFolio:x(i)},_.value=!0,console.log(i)},x=i=>{const a=i.team.name,e=["01","02","03","04","05","06","07","08","09","10","11","12"],[c,r,m]=i.created_at.split("/");return`${a.substring(0,3)}-${i.id}-${c}${e[r-1]}${m.substring(2,4)}`};return(i,a)=>(l(),n(v,null,[h(H,{show:_.value,onClose:a[3]||(a[3]=e=>_.value=!1)},z({title:p(()=>{var e,c,r;return[t("p",I,[d(" Número de solicitud "),t("span",D,s((e=o.value)==null?void 0:e.tmpFolio),1)]),t("p",K," Fecha: "+s(((r=(c=o.value)==null?void 0:c.listed_activities[0])==null?void 0:r.date_string_formatted)??"n/d"),1)]}),footer:p(()=>[t("div",Y,[t("p",null,[d(" Por: "+s(o.value.user.name)+" ",1),o.value.branch?(l(),n("span",q,s(o.value.branch.name),1)):u("",!0)])]),t("a",{href:i.route("export.pdf.proform.quote",{quote:o.value.id})},[h(T,{onClick:a[0]||(a[0]=e=>_.value=!1)},{default:p(()=>[d(" Imprimir PDF ")]),_:1})],8,tt),o.value.status=="created"?(l(),V(B,{key:0,class:"ml-2",onClick:a[1]||(a[1]=e=>N(o.value))},{default:p(()=>[d(" Solicitar ")]),_:1})):u("",!0),h(B,{class:"ml-2",onClick:a[2]||(a[2]=e=>_.value=!1)},{default:p(()=>[d(" Aceptar ")]),_:1})]),_:2},[o.value?{name:"content",fn:p(()=>[t("div",O,[t("div",null,[t("p",null,"Nombre: "+s(o.value.holder_name),1),t("p",null," Adultos: "+s(o.value.adults)+" - Menor: "+s(o.value.minors)+" - Infante: "+s(o.value.infants),1)]),Z,t("div",null,[G,J,t("ul",null,[(l(!0),n(v,null,L(o.value.listed_activities,e=>{var c,r;return l(),n("li",null,s(`${e.activity.name} ${e.pickup_time!=null&&((c=e.pickup_time)==null?void 0:c.slice(0,5))!="00:00"?e.pickup_time.slice(0,5):""} ${((r=e.hotel)==null?void 0:r.name)??""}`),1)}),256))])]),Q,t("div",null,[R,U,t("p",null," Precio publico: $"+s(o.value.public_price),1),t("p",null," Precio a pagar: $"+s(o.value.cost_amount),1),W,t("p",X," Comision: $"+s((o.value.public_price-o.value.cost_amount).toFixed(2)??"0"),1)])])]),key:"0"}:void 0]),1032,["show"]),t("section",et,[t("div",st,[t("div",ot,[t("header",it,[at,t("div",null,[h(M,{agencies:f.agencies,class:"grid grid-cols-6 gap-4"},null,8,["agencies"])])]),t("div",lt,[t("div",nt,[t("table",ct,[rt,t("tbody",dt,[(l(!0),n(v,null,L(f.quotes.data,e=>{var c,r,m,g,b,y,k,C,$,A,P;return l(),n("tr",pt,[t("td",_t,[t("div",ht,[t("div",ut,s(e.created_at),1)])]),t("td",mt,[t("div",ft,[t("div",vt,[(c=e==null?void 0:e.coupon)!=null&&c.code&&((r=e==null?void 0:e.coupon)==null?void 0:r.status)=="confirmed"?(l(),n("a",{key:0,href:i.route("quote.preview",e.uuid)},[t("div",null,[d(s(e.coupon.code)+" ",1),xt])],8,wt)):e.status=="created"?(l(),n("button",{key:1,onClick:S=>w(e),class:"px-3 py-2 rounded-md text-sm font-medium border focus:outline-none focus:ring transition text-sky-600 border-sky-600 hover:text-white hover:bg-sky-600 active:bg-sky-700 focus:ring-sky-300",type:"button"}," Solicitar ",8,gt)):e.status=="pending"?(l(),n("button",{key:2,onClick:S=>w(e),class:"px-3 py-2 rounded-md text-sm font-medium border focus:outline-none focus:ring transition text-yellow-600 border-yellow-600 hover:text-white hover:bg-yellow-600 active:bg-yellow-700 focus:ring-yellow-300",type:"button"},s(x(e)),9,bt)):u("",!0)])])]),t("td",yt,[t("div",kt,[t("div",Ct,s(e.team.name),1)])]),t("td",$t,[t("div",At,[t("div",Pt,s(e.holder_name),1)])]),t("td",Bt,[t("div",{class:"text-left",title:`Adultos ${e.adults}, Niños: ${e.minors}, Infantes: ${e.infants}`},s(e.adults)+"."+s(e.minors)+"."+s(e.infants),9,Ft)]),t("td",Lt,s(((m=e.listed_activities[0])==null?void 0:m.date)??"n/d"),1),t("td",Nt,[t("div",{class:"text-left font-medium text-green-500 capitalize",title:e.type=="entrance"&&e.national=="1"?"Promomex":""},[d(s(e.type)+" ",1),e.type=="pack"?(l(),n("span",jt,"#"+s(e.listed_activities.length),1)):u("",!0),e.type=="entrance"&&e.national=="1"?(l(),n("span",Mt,Tt)):u("",!0)],8,St)]),t("td",zt,[t("div",Vt,s((g=e.listed_activities[0])==null?void 0:g.activity.name.toLowerCase()),1)]),t("td",Et,[t("div",It," $"+s(e.cost_amount),1)]),t("td",Dt,[t("div",Kt," $"+s(e.sale_amount),1)]),t("td",Ot,[t("div",Zt," $"+s(e.public_price),1)]),t("td",Gt,[t("div",Jt,s(((b=e.listed_activities[0])==null?void 0:b.pickup_time)==null?"N/A":e.listed_activities[0].pickup_time.slice(0,5)),1)]),t("td",Qt,[t("div",{class:"text-left font-medium text-green-500 truncate w-20",title:((k=(y=e.listed_activities[0])==null?void 0:y.hotel)==null?void 0:k.name)??"No Aplica"},s((($=(C=e.listed_activities[0])==null?void 0:C.hotel)==null?void 0:$.name)??"N/A"),9,Rt)]),t("td",Ut,[t("div",Wt,s(((P=(A=e.listed_activities[0])==null?void 0:A.hotel)==null?void 0:P.zone.name)??"N/A"),1)])])}),256))])])]),t("div",Xt,[h(j,{links:f.quotes},null,8,["links"])])])])])])],64))}};export{ce as default};
