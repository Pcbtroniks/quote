import{r as _,e as u,o as d,b as p,K as x,w as v,a,f as P,t as s,F as C,h as w,g as A,n as S,L as k}from"./app-7bHLq7ZN.js";import{_ as $}from"./Button-D3L_hWOj.js";import{_ as q}from"./DialogModal-CcyXWEvs.js";import{_ as z}from"./PrimaryButton-ClZJ9IEU.js";const W=o=>({1:"cancun",2:"rm",3:"pdc"})[o],X=new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),N=o=>["no especificada","entrance","tour","pack"][o]??"invalida",Y=(o,e)=>Number(Number(o)+Number(e)).toFixed(2),T=o=>o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),Z=o=>o>0?"$"+T(o):"",F=a("p",{class:"font-bold text-gray-700"}," Resumen de la cotizaciÃ³n actual ",-1),L={class:"text-gray-700"},M={class:"text-gray-700"},D=a("div",{class:"h-8"},null,-1),B={key:0},V=a("p",{class:"font-bold text-xl text-gray-700"}," Actividades ",-1),j=a("div",{class:"h-4"},null,-1),I=a("div",{class:"h-8"},null,-1),O=a("p",{class:"font-bold text-xl text-gray-700"}," Importes totales ",-1),E=a("div",{class:"h-4"},null,-1),Q=a("div",{class:"h-8"},null,-1),R={class:"font-bold text-xl text-gray-700"},K={__name:"ShowCostsModal",props:{activities:{type:Object},activityList:{type:Array}},setup(o){const e=o,i=_([]),t=_({show:!1,totalPublicPrice:0,totalAgencyCost:0,quotes:[]}),f=()=>{if(N(e.activities.tipoReservacion)=="entrance"){const r={activity:e.activities.actividad,adults:e.activities.adultos,minors:e.activities.menores,season:e.activities.season,zone:e.activities.nacionales?4:5,type:"entrance"};return i.value=[r],null}return i.value=[...e.activityList],null},h=()=>{t.value.totalPublicPrice=0,t.value.totalAgencyCost=0,t.value.quotes=[],f(),i.value.forEach(({activity:r,adults:l,minors:n,season:y,zone:b,type:m})=>{l=e.activities.adultos,n=e.activities.menores,i.value.length==2?m="pack_double":i.value.length>=3&&(m="pack_multiple"),k.get(route("quoter.calculate"),{params:{activity:r,adults:l,minors:n,season:y,zone:b,type:m}}).then(c=>(t.value.quotes=[...t.value.quotes,c.data],t.value.totalPublicPrice+=c.data.summary.totalPublicPrice,t.value.totalAgencyCost+=c.data.summary.totalAgencyCost,!0)).catch(c=>{console.log(c)})}),console.clear(),console.log(e.activities),console.log(t.value),t.value.show=!0};function g(){h()}return(r,l)=>(d(),u("div",null,[p(q,{show:t.value.show,onClose:l[1]||(l[1]=n=>t.value.show=!1)},x({title:v(()=>[F,a("p",L," Fecha: "+s(new Date().toLocaleDateString()),1)]),footer:v(()=>[p(z,{class:"ml-2",onClick:l[0]||(l[0]=n=>t.value.show=!1)},{default:v(()=>[A(" Aceptar ")]),_:1})]),_:2},[t.value.quotes?{name:"content",fn:v(()=>[a("div",M,[a("div",null,[a("p",null," Nombre: "+s(e.activities.nombreTitular??"Ingrese el nomber por favor."),1),a("p",null," Adultos: "+s(e.activities.adultos)+" - Menor: "+s(e.activities.menores)+" - Infante: "+s(e.activities.infantes),1)]),D,t.value.quotes?(d(),u("div",B,[V,j,a("ul",null,[(d(!0),u(C,null,w(t.value.quotes,n=>(d(),u("li",null,s(n.description),1))),256))])])):P("",!0),I,a("div",null,[O,E,a("p",null,"Precio publico: $"+s(t.value.totalPublicPrice),1),a("p",null,"Precio a pagar: $"+s(t.value.totalAgencyCost),1),Q,a("p",R," Comision: $"+s((t.value.totalPublicPrice-t.value.totalAgencyCost).toFixed(2)??"0"),1)])])]),key:"0"}:void 0]),1032,["show"]),p($,{onClick:g,msg:"Calcular costos",class:S("btn btn-primary")})]))}},tt=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{tt as S,X as T,K as _,Y as f,Z as h,N as p,W as z};
