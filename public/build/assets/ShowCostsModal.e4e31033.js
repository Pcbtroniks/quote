import{r as h,o as d,d as v,b as f,K as x,w as m,n as C,a as e,t as s,F as P,h as w,e as A,f as k,M as S}from"./app.00a4a0ba.js";import{_ as $}from"./Button.c1c29285.js";import{_ as q}from"./DialogModal.30e4bea4.js";import{_ as z}from"./PrimaryButton.1940c5e2.js";const U=o=>({1:"cancun",2:"rm",3:"pdc"})[o],W=new Date().toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),N=o=>{var l;return(l=["no especificada","entrance","tour","pack"][o])!=null?l:"invalida"},X=(o,a)=>Number(Number(o)+Number(a)).toFixed(2),Y=o=>o>0?"$"+o:"",M=e("p",{class:"font-bold text-gray-700"}," Resumen de la cotizaci\xF3n actual ",-1),T={class:"text-gray-700"},F={class:"text-gray-700"},D=e("div",{class:"h-8"},null,-1),L={key:0},V=e("p",{class:"font-bold text-xl text-gray-700"}," Actividades ",-1),j=e("div",{class:"h-4"},null,-1),B=e("div",{class:"h-8"},null,-1),I=e("p",{class:"font-bold text-xl text-gray-700"}," Importes totales ",-1),O=e("div",{class:"h-4"},null,-1),E=e("div",{class:"h-8"},null,-1),Q={class:"font-bold text-xl text-gray-700"},R={__name:"ShowCostsModal",props:{activities:{type:Object},activityList:{type:Array}},setup(o){const a=o,l=h([]),t=h({show:!1,totalPublicPrice:0,totalAgencyCost:0,quotes:[]}),y=()=>{if(N(a.activities.tipoReservacion)=="entrance"){const r={activity:a.activities.actividad,adults:a.activities.adultos,minors:a.activities.menores,season:a.activities.season,zone:a.activities.nacionales?4:5,type:"entrance"};return l.value=[r],null}return l.value=[...a.activityList],null},g=()=>{t.value.totalPublicPrice=0,t.value.totalAgencyCost=0,t.value.quotes=[],y(),l.value.forEach(({activity:r,adults:n,minors:i,season:u,zone:p,type:_})=>{l.value.length==2?_="pack_double":l.value.length>=3&&(_="pack_multiple"),S.get(route("quoter.calculate"),{params:{activity:r,adults:n,minors:i,season:u,zone:p,type:_}}).then(c=>(t.value.quotes=[...t.value.quotes,c.data],t.value.totalPublicPrice+=c.data.summary.totalPublicPrice,t.value.totalAgencyCost+=c.data.summary.totalAgencyCost,!0)).catch(c=>{console.log(c)})}),console.clear(),console.log(a.activities),console.log(t.value),t.value.show=!0};function b(){g()}return(r,n)=>(d(),v("div",null,[f(q,{show:t.value.show,onClose:n[1]||(n[1]=i=>t.value.show=!1)},x({title:m(()=>[M,e("p",T," Fecha: "+s(new Date().toLocaleDateString()),1)]),footer:m(()=>[f(z,{class:"ml-2",onClick:n[0]||(n[0]=i=>t.value.show=!1)},{default:m(()=>[k(" Aceptar ")]),_:1})]),_:2},[t.value.quotes?{name:"content",fn:m(()=>{var i,u;return[e("div",F,[e("div",null,[e("p",null," Nombre: "+s((i=a.activities.nombreTitular)!=null?i:"Ingrese el nomber por favor."),1),e("p",null," Adultos: "+s(a.activities.adultos)+" - Menor: "+s(a.activities.menores)+" - Infante: "+s(a.activities.infantes),1)]),D,t.value.quotes?(d(),v("div",L,[V,j,e("ul",null,[(d(!0),v(P,null,w(t.value.quotes,p=>(d(),v("li",null,s(p.description),1))),256))])])):A("",!0),B,e("div",null,[I,O,e("p",null,"Precio publico: $"+s(t.value.totalPublicPrice),1),e("p",null,"Precio a pagar: $"+s(t.value.totalAgencyCost),1),E,e("p",Q," Comision: $"+s((u=(t.value.totalPublicPrice-t.value.totalAgencyCost).toFixed(2))!=null?u:"0"),1)])])]}),key:"0"}:void 0]),1032,["show"]),f($,{onClick:b,msg:"Calcular costos",class:C("btn btn-primary")})]))}},Z=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"}));export{Z as S,W as T,R as _,X as f,Y as h,N as p,U as z};
