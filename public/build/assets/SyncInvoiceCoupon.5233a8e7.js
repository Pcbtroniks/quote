import{u as x,I as b,o as r,c as w,w as t,f as l,a as e,t as a,b as n,d as p,e as m,n as C,g as _}from"./app.f2462099.js";import{_ as k}from"./FormSection.a8ac0ce3.js";import{_ as $,a as S}from"./TextInput.b593bb8f.js";import{_ as V}from"./InputLabel.a8b86840.js";import{_ as f}from"./PrimaryButton.2cf4dcb6.js";import"./SectionTitle.490b5162.js";import"./_plugin-vue_export-helper.cdc0426e.js";const q={class:"col-span-6"},N={class:"col-span-6 sm:col-span-4"},j={key:0},B={class:"mt-4 w-[30rem] border-2 border-b-4 border-gray-200 rounded-xl hover:bg-gray-50"},I={key:0,class:"bg-sky-500 w-fit px-4 py-1 text-sm font-bold text-white rounded-tl-lg rounded-br-xl"},T={class:"grid grid-cols-6 p-5 gap-y-2"},z=e("div",null,null,-1),D={class:"col-span-5 md:col-span-4 ml-4"},E={class:"text-sky-500 font-bold text-xs capitalize"},F={class:"text-gray-600 font-bold"},G={class:"text-gray-400"},H={class:"text-gray-400"},O={class:"flex col-start-2 ml-4 md:col-start-auto md:ml-0 md:justify-end"},P={class:"rounded-lg text-sky-500 font-bold bg-sky-100 py-1 px-3 text-sm w-fit h-fit"},W={__name:"SyncInvoiceCoupon",props:{invoice:Object},setup(y){const d=y,u=x({invoice:""}),o=b({coupon:null,couponCode:null,error:null}),h=()=>null,v=async c=>{const s=await g(route("coupon.search.code",{code:c}));s.status==404?(o.error="No se ha encontrado un cupon",setTimeout(()=>{o.error=null},3e3)):(o.coupon=s,console.log(s))},g=async(c,s)=>{try{return await(await fetch(c,s)).json()}catch(i){console.error(await i.json())}};return(c,s)=>(r(),w(k,{onSubmitted:h},{title:t(()=>[l(" Invoice Details ")]),description:t(()=>[l(" Sync invoice with coupons searching by coupon code. ")]),form:t(()=>[e("div",q,[e("div",null,a(`Invoice folio: ${d.invoice.folio} - status: ${d.invoice.status}`),1)]),e("div",N,[n(V,{for:"folio",value:"Search a coupon"}),n($,{id:"folio",modelValue:o.couponCode,"onUpdate:modelValue":s[0]||(s[0]=i=>o.couponCode=i),type:"text",class:"inline w-3/4 mt-1",placeholder:"Coupon code...",autofocus:""},null,8,["modelValue"]),n(f,{onClick:s[1]||(s[1]=()=>v(o.couponCode)),disabled:!o.couponCode,class:"inline ml-4"},{default:t(()=>[l(" search ")]),_:1},8,["disabled"]),n(S,{message:o.error,class:"mt-2"},null,8,["message"]),o.coupon?(r(),p("div",j,[e("div",B,[o.coupon.quote.national!=0?(r(),p("p",I," Promomex ")):m("",!0),e("div",T,[z,e("div",D,[e("p",E,a(o.coupon.quote.type),1),e("p",F,a(o.coupon.quote.listed_activity.activity.name),1),e("p",G,a(o.coupon.quote.listed_activity.date),1),e("p",H,a(o.coupon.quote.holder_name),1)]),e("div",O,[e("p",P,"$"+a(o.coupon.sale_amount),1)])])])])):m("",!0)])]),actions:t(()=>[n(f,{class:C({"opacity-25":_(u).processing}),disabled:_(u).processing},{default:t(()=>[l(" Save ")]),_:1},8,["class","disabled"])]),_:1}))}};export{W as default};
