import{d as H}from"./index-Cl2jwcar.js";import{d as k,r as x,e as n,o as r,f as u,b as a,w as s,u as t,g as l,n as v,a as o,F as C,h as R,t as b}from"./app-CZoUp2vn.js";import{_ as J}from"./ActionMessage-Cn0zeNe6.js";import{_ as F}from"./ActionSection-CrOO2yzF.js";import{_ as B}from"./ConfirmationModal-D1TUXyJr.js";import{_ as P}from"./DangerButton-rAmouDG4.js";import{_ as K}from"./DialogModal-DayqGVNj.js";import{_ as Q}from"./FormSection-DdlWSAax.js";import{_ as j}from"./InputError-CY-tt7lq.js";import{_ as z}from"./InputLabel-HP-SjKYk.js";import{_ as E}from"./PrimaryButton-Cukri6w9.js";import{_ as M}from"./SecondaryButton-jg2Oo4S0.js";import{S}from"./SectionBorder-Cn44ucTy.js";import{_ as W}from"./TextInput-CwbL4Esz.js";import"./SectionTitle-Dc0__E7P.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-Dax2FewM.js";const X={key:0},Y=o("div",{class:"col-span-6"},[o("div",{class:"max-w-xl text-sm text-gray-600"}," Por favor, proporciona el email de la persona que te gustaría agregar a esta agencia. ")],-1),Z={class:"col-span-6 sm:col-span-4"},ee={key:0,class:"col-span-6 lg:col-span-4"},se={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},te=["onClick"],oe={class:"flex items-center"},ae={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},ne=o("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),re=[ne],le={class:"mt-2 text-xs text-gray-600 text-left"},ie={key:1},ce={class:"space-y-6"},me={class:"text-gray-600"},de={class:"flex items-center"},ue=["onClick"],ve={key:2},fe={class:"space-y-6"},ge={class:"flex items-center"},be=["src","alt"],_e={class:"ml-4"},pe={class:"flex items-center"},ye=["onClick"],ke={key:1,class:"ml-2 text-sm text-gray-400"},he=["onClick"],xe={key:0},Ce={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},Re=["onClick"],$e={class:"flex items-center"},we={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},Te=o("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),Me=[Te],Se={class:"mt-2 text-xs text-gray-600"},Je={__name:"TeamMemberManager",props:{team:Object,availableRoles:Array,userPermissions:Object},setup(i){const p=i,m=k.useForm({email:"",role:null}),f=k.useForm({role:null}),$=k.useForm(),w=k.useForm(),y=x(!1),T=x(null),h=x(!1),_=x(null),V=()=>{m.post(route("team-members.store",p.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>m.reset()})},q=d=>{H.Inertia.delete(route("team-invitations.destroy",d),{preserveScroll:!0})},I=d=>{T.value=d,f.role=d.membership.role,y.value=!0},N=()=>{f.put(route("team-members.update",[p.team,T.value]),{preserveScroll:!0,onSuccess:()=>y.value=!1})},O=()=>{h.value=!0},L=()=>{$.delete(route("team-members.destroy",[p.team,k.usePage().props.value.user]))},G=d=>{_.value=d},D=()=>{w.delete(route("team-members.destroy",[p.team,_.value]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>_.value=null})},A=d=>p.availableRoles.find(c=>c.key===d).name;return(d,c)=>(r(),n("div",null,[i.userPermissions.canAddTeamMembers?(r(),n("div",X,[a(S),a(Q,{onSubmitted:V},{title:s(()=>[l(" Agregar integrante ")]),description:s(()=>[l(" Agrega un nuevo integrante a tu agencia, permitiéndole colaborar contigo. ")]),form:s(()=>[Y,o("div",Z,[a(z,{for:"email",value:"Email"}),a(W,{id:"email",modelValue:t(m).email,"onUpdate:modelValue":c[0]||(c[0]=e=>t(m).email=e),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),a(j,{message:t(m).errors.email,class:"mt-2"},null,8,["message"])]),i.availableRoles.length>0?(r(),n("div",ee,[a(z,{for:"roles",value:"Rol"}),a(j,{message:t(m).errors.role,class:"mt-2"},null,8,["message"]),o("div",se,[(r(!0),n(C,null,R(i.availableRoles,(e,g)=>(r(),n("button",{key:e.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":g>0,"rounded-b-none":g!=Object.keys(i.availableRoles).length-1}]),onClick:U=>t(m).role=e.key},[o("div",{class:v({"opacity-50":t(m).role&&t(m).role!=e.key})},[o("div",oe,[o("div",{class:v(["text-sm text-gray-600",{"font-semibold":t(m).role==e.key}])},b(e.name),3),t(m).role==e.key?(r(),n("svg",ae,re)):u("",!0)]),o("div",le,b(e.description),1)],2)],10,te))),128))])])):u("",!0)]),actions:s(()=>[a(J,{on:t(m).recentlySuccessful,class:"mr-3"},{default:s(()=>[l(" Agregado. ")]),_:1},8,["on"]),a(E,{class:v({"opacity-25":t(m).processing}),disabled:t(m).processing},{default:s(()=>[l(" Agregar ")]),_:1},8,["class","disabled"])]),_:1})])):u("",!0),i.team.team_invitations.length>0&&i.userPermissions.canAddTeamMembers?(r(),n("div",ie,[a(S),a(F,{class:"mt-10 sm:mt-0"},{title:s(()=>[l(" Invitaciones pendientes ")]),description:s(()=>[l(" Estas personas han sido invitadas a tu agencia y se les ha enviado un correo electrónico de invitación. Pueden unirse a la agencia aceptando la invitación por correo electrónico. ")]),content:s(()=>[o("div",ce,[(r(!0),n(C,null,R(i.team.team_invitations,e=>(r(),n("div",{key:e.id,class:"flex items-center justify-between"},[o("div",me,b(e.email),1),o("div",de,[i.userPermissions.canRemoveTeamMembers?(r(),n("button",{key:0,class:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",onClick:g=>q(e)}," Cancelar ",8,ue)):u("",!0)])]))),128))])]),_:1})])):u("",!0),i.team.users.length>0?(r(),n("div",ve,[a(S),a(F,{class:"mt-10 sm:mt-0"},{title:s(()=>[l(" Integrantes ")]),description:s(()=>[l(" Todas las personas que son parte de esta agencia. ")]),content:s(()=>[o("div",fe,[(r(!0),n(C,null,R(i.team.users,e=>(r(),n("div",{key:e.id,class:"flex items-center justify-between"},[o("div",ge,[o("img",{class:"w-8 h-8 rounded-full",src:e.profile_photo_url,alt:e.name},null,8,be),o("div",_e,b(e.name),1)]),o("div",pe,[i.userPermissions.canAddTeamMembers&&i.availableRoles.length?(r(),n("button",{key:0,class:"ml-2 text-sm text-gray-400 underline",onClick:g=>I(e)},b(A(e.membership.role)),9,ye)):i.availableRoles.length?(r(),n("div",ke,b(A(e.membership.role)),1)):u("",!0),d.$page.props.user.id===e.id?(r(),n("button",{key:2,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:O}," Abandonar ")):i.userPermissions.canRemoveTeamMembers?(r(),n("button",{key:3,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:g=>G(e)}," Remover ",8,he)):u("",!0)])]))),128))])]),_:1})])):u("",!0),a(K,{show:y.value,onClose:c[2]||(c[2]=e=>y.value=!1)},{title:s(()=>[l(" Gestionar Rol ")]),content:s(()=>[T.value?(r(),n("div",xe,[o("div",Ce,[(r(!0),n(C,null,R(i.availableRoles,(e,g)=>(r(),n("button",{key:e.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":g>0,"rounded-b-none":g!==Object.keys(i.availableRoles).length-1}]),onClick:U=>t(f).role=e.key},[o("div",{class:v({"opacity-50":t(f).role&&t(f).role!==e.key})},[o("div",$e,[o("div",{class:v(["text-sm text-gray-600",{"font-semibold":t(f).role===e.key}])},b(e.name),3),t(f).role===e.key?(r(),n("svg",we,Me)):u("",!0)]),o("div",Se,b(e.description),1)],2)],10,Re))),128))])])):u("",!0)]),footer:s(()=>[a(M,{onClick:c[1]||(c[1]=e=>y.value=!1)},{default:s(()=>[l(" Cancelar ")]),_:1}),a(E,{class:v(["ml-3",{"opacity-25":t(f).processing}]),disabled:t(f).processing,onClick:N},{default:s(()=>[l(" Guardar ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),a(B,{show:h.value,onClose:c[4]||(c[4]=e=>h.value=!1)},{title:s(()=>[l(" Abandonar agencia ")]),content:s(()=>[l(" Estas seguro que quieres abandonar esta agencia? ")]),footer:s(()=>[a(M,{onClick:c[3]||(c[3]=e=>h.value=!1)},{default:s(()=>[l(" Cancelar ")]),_:1}),a(P,{class:v(["ml-3",{"opacity-25":t($).processing}]),disabled:t($).processing,onClick:L},{default:s(()=>[l(" Abandonar ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),a(B,{show:_.value,onClose:c[6]||(c[6]=e=>_.value=null)},{title:s(()=>[l(" Remover integrante ")]),content:s(()=>[l(" Estas seguro que quieres remover a esta persona de la agencia? ")]),footer:s(()=>[a(M,{onClick:c[5]||(c[5]=e=>_.value=null)},{default:s(()=>[l(" Cancelar ")]),_:1}),a(P,{class:v(["ml-3",{"opacity-25":t(w).processing}]),disabled:t(w).processing,onClick:D},{default:s(()=>[l(" Remover ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{Je as default};
